-- Services


local TeleportService = game:GetService("TeleportService")
local PhysicsService = game:GetService("PhysicsService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local Players = game:GetService("Players")

-- Changelog

local VersionString = "v1.2.2"
local ChangeLog = "• New 'Link' Command\n• Optimized Magnet\n• New category titles\n• New 'Free Zoom' command\n• New 'Magnet' command" 

-- Variables

local Player = Players.LocalPlayer
local Mouse = Player:GetMouse()

local Camera = workspace.CurrentCamera

local MainUI
local MarkerUI

local OuterFrame
local Contents
local ContentShrunken
local InfoFrame

local CommandFrames = {}
local DefaultLighting = {}

local CommandCategories = {"None"}
local CurrentCategory = "None"

local FadeTweenInfo = TweenInfo.new(
	0.25, 
	Enum.EasingStyle.Quint
)

local UIOpen = true
local TipsEnabled = true
local MarkersActive = false

local PhaseEnabled = false
local PhaseObjects = {}

local TeleportIndicator = nil
local TeleportEnabled = false
local ReturnOnFall = false

local FlySpeed = 30

local DefaultDestroyHeight
local DefaultMinZoomDistance
local DefaultMaxZoomDistance

local LogsOpen = false
local Log

-- Sound Handling

local ClickSoundID = 6895079853

local function PlaySoundFromID(ID, Data)
	local Sound = Instance.new("Sound", game:GetService("SoundService"))
	Sound.Name = "SoundInstance"
	Sound.SoundId = "rbxassetid://" .. ID
	Sound.Volume = Data.Volume
	Sound:Play()
	Sound.Ended:Wait()
	Sound:Destroy()
end

-- Create UI Method


function CreateUI()
	-- Gui to Lua
	-- Version: 3.2

	-- Instances:

	local EmptyTools = Instance.new("ScreenGui")
	local OuterFrame = Instance.new("Frame")
	local UICorner = Instance.new("UICorner")
	local Contents = Instance.new("Frame")
	local Title = Instance.new("TextLabel")
	local UICorner_2 = Instance.new("UICorner")
	local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
	local Commands = Instance.new("ScrollingFrame")
	local UIListLayout = Instance.new("UIListLayout")
	local Search = Instance.new("TextBox")
	local UICorner_3 = Instance.new("UICorner")
	local UITextSizeConstraint = Instance.new("UITextSizeConstraint")
	local Category = Instance.new("TextButton")
	local UICorner_4 = Instance.new("UICorner")
	local UITextSizeConstraint_2 = Instance.new("UITextSizeConstraint")
	local Info = Instance.new("Frame")
	local UICorner_5 = Instance.new("UICorner")
	local Title_2 = Instance.new("TextLabel")
	local Info_2 = Instance.new("TextLabel")
	local UIAspectRatioConstraint_2 = Instance.new("UIAspectRatioConstraint")
	local Tips = Instance.new("TextButton")
	local UICorner_6 = Instance.new("UICorner")
	local UITextSizeConstraint_3 = Instance.new("UITextSizeConstraint")
	local Info_3 = Instance.new("TextButton")
	local UICorner_7 = Instance.new("UICorner")
	local UIAspectRatioConstraint_3 = Instance.new("UIAspectRatioConstraint")
	local ContentShrunken = Instance.new("Frame")
	local UICorner_8 = Instance.new("UICorner")
	local UIAspectRatioConstraint_4 = Instance.new("UIAspectRatioConstraint")
	local Close = Instance.new("TextButton")
	local UICorner_9 = Instance.new("UICorner")
	local UIAspectRatioConstraint_5 = Instance.new("UIAspectRatioConstraint")
	local Toggle = Instance.new("TextButton")
	local UICorner_10 = Instance.new("UICorner")
	local UIAspectRatioConstraint_6 = Instance.new("UIAspectRatioConstraint")

	--Properties:

	EmptyTools.Name = "EmptyTools"
	EmptyTools.IgnoreGuiInset = true
	EmptyTools.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	EmptyTools.ResetOnSpawn = false

	OuterFrame.Name = "OuterFrame"
	OuterFrame.Parent = EmptyTools
	OuterFrame.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
	OuterFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
	OuterFrame.BorderSizePixel = 0
	OuterFrame.Position = UDim2.new(0.67014116, 0, 0.439849585, 0)
	OuterFrame.Size = UDim2.new(0.317718238, 0, 0.462848485, 0)

	UICorner.CornerRadius = UDim.new(0.0500000007, 0)
	UICorner.Parent = OuterFrame

	Contents.Name = "Contents"
	Contents.Parent = OuterFrame
	Contents.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
	Contents.BackgroundTransparency = 1.000
	Contents.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Contents.BorderSizePixel = 0
	Contents.Size = UDim2.new(1, 0, 1, 0)

	Title.Name = "Title"
	Title.Parent = Contents
	Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Title.BackgroundTransparency = 1.000
	Title.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Title.BorderSizePixel = 0
	Title.Position = UDim2.new(0.064338237, 0, 0.034324944, 0)
	Title.Size = UDim2.new(0.63786763, 0, 0.125858128, 0)
	Title.Font = Enum.Font.Gotham
	Title.Text = "Empty Tools"
	Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title.TextScaled = true
	Title.TextSize = 14.000
	Title.TextWrapped = true
	Title.TextXAlignment = Enum.TextXAlignment.Left

	UICorner_2.CornerRadius = UDim.new(0.0500000007, 0)
	UICorner_2.Parent = Contents

	UIAspectRatioConstraint.Parent = Contents
	UIAspectRatioConstraint.AspectRatio = 1.245

	Commands.Name = "Commands"
	Commands.Parent = Contents
	Commands.Active = true
	Commands.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Commands.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Commands.BorderSizePixel = 0
	Commands.Position = UDim2.new(0.064338237, 0, 0.295194507, 0)
	Commands.Size = UDim2.new(0.880514681, 0, 0.645308912, 0)
	Commands.CanvasSize = UDim2.new(0, 0, 3.5, 0)
	Commands.ScrollBarThickness = 13

	UIListLayout.Parent = Commands
	UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	UIListLayout.Padding = UDim.new(0.00249999994, 0)

	Search.Name = "Search"
	Search.Parent = Contents
	Search.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Search.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Search.BorderSizePixel = 0
	Search.Position = UDim2.new(0.064338237, 0, 0.194508016, 0)
	Search.Size = UDim2.new(0.286764711, 0, 0.080091536, 0)
	Search.Font = Enum.Font.Gotham
	Search.PlaceholderColor3 = Color3.fromRGB(126, 126, 126)
	Search.PlaceholderText = "Search.."
	Search.Text = ""
	Search.TextColor3 = Color3.fromRGB(255, 255, 255)
	Search.TextScaled = true
	Search.TextSize = 25.000
	Search.TextWrapped = true

	UICorner_3.CornerRadius = UDim.new(0.550000012, 0)
	UICorner_3.Parent = Search

	UITextSizeConstraint.Parent = Search
	UITextSizeConstraint.MaxTextSize = 23

	Category.Name = "Category"
	Category.Parent = Contents
	Category.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Category.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Category.BorderSizePixel = 0
	Category.Position = UDim2.new(0.370289385, 0, 0.192686573, 0)
	Category.Size = UDim2.new(0.309397668, 0, 0.0800000057, 0)
	Category.Font = Enum.Font.Gotham
	Category.Text = "Filter: None"
	Category.TextColor3 = Color3.fromRGB(255, 255, 255)
	Category.TextScaled = true
	Category.TextSize = 20.000
	Category.TextWrapped = true

	UICorner_4.CornerRadius = UDim.new(0.550000012, 0)
	UICorner_4.Parent = Category

	UITextSizeConstraint_2.Parent = Category
	UITextSizeConstraint_2.MaxTextSize = 19

	Info.Name = "Info"
	Info.Parent = Contents
	Info.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
	Info.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Info.BorderSizePixel = 0
	Info.Position = UDim2.new(0.00554660289, 0, -0.230156511, 0)
	Info.Size = UDim2.new(0.985446513, 0, 0.214045554, 0)
	Info.Visible = false

	UICorner_5.CornerRadius = UDim.new(0.25, 0)
	UICorner_5.Parent = Info

	Title_2.Name = "Title"
	Title_2.Parent = Info
	Title_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Title_2.BackgroundTransparency = 1.000
	Title_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Title_2.BorderSizePixel = 0
	Title_2.Position = UDim2.new(0.317073166, 0, 0.0645161271, 0)
	Title_2.Size = UDim2.new(0.375234514, 0, 0.290322572, 0)
	Title_2.Font = Enum.Font.GothamBold
	Title_2.Text = "Title"
	Title_2.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title_2.TextScaled = true
	Title_2.TextSize = 14.000
	Title_2.TextWrapped = true

	Info_2.Name = "Info"
	Info_2.Parent = Info
	Info_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Info_2.BackgroundTransparency = 1.000
	Info_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Info_2.BorderSizePixel = 0
	Info_2.Position = UDim2.new(0.0450282581, 0, 0.354838699, 0)
	Info_2.Size = UDim2.new(0.915654898, 0, 0.54838711, 0)
	Info_2.Font = Enum.Font.Gotham
	Info_2.Text = "Info"
	Info_2.TextColor3 = Color3.fromRGB(255, 255, 255)
	Info_2.TextScaled = true
	Info_2.TextSize = 14.000
	Info_2.TextWrapped = true

	UIAspectRatioConstraint_2.Parent = Info
	UIAspectRatioConstraint_2.AspectRatio = 5.731

	Tips.Name = "Tips"
	Tips.Parent = Contents
	Tips.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Tips.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Tips.BorderSizePixel = 0
	Tips.Position = UDim2.new(0.701087952, 0, 0.192686573, 0)
	Tips.Size = UDim2.new(0.194556624, 0, 0.0800000057, 0)
	Tips.Font = Enum.Font.Gotham
	Tips.Text = "Tips: On"
	Tips.TextColor3 = Color3.fromRGB(255, 255, 255)
	Tips.TextScaled = true
	Tips.TextSize = 20.000
	Tips.TextWrapped = true

	UICorner_6.CornerRadius = UDim.new(0.550000012, 0)
	UICorner_6.Parent = Tips

	UITextSizeConstraint_3.Parent = Tips
	UITextSizeConstraint_3.MaxTextSize = 19

	Info_3.Name = "Info"
	Info_3.Parent = OuterFrame
	Info_3.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Info_3.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Info_3.BorderSizePixel = 0
	Info_3.Position = UDim2.new(0.701061368, 0, 0.0343248919, 0)
	Info_3.Size = UDim2.new(0.0790441632, 0, 0.125858128, 0)
	Info_3.ZIndex = 4
	Info_3.Font = Enum.Font.Roboto
	Info_3.Text = "?"
	Info_3.TextColor3 = Color3.fromRGB(255, 255, 255)
	Info_3.TextScaled = true
	Info_3.TextSize = 14.000
	Info_3.TextWrapped = true

	UICorner_7.CornerRadius = UDim.new(0.0500000007, 0)
	UICorner_7.Parent = Info_3

	UIAspectRatioConstraint_3.Parent = Info_3
	UIAspectRatioConstraint_3.AspectRatio = 1.004

	ContentShrunken.Name = "ContentShrunken"
	ContentShrunken.Parent = OuterFrame
	ContentShrunken.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
	ContentShrunken.BorderColor3 = Color3.fromRGB(0, 0, 0)
	ContentShrunken.BorderSizePixel = 0
	ContentShrunken.Position = UDim2.new(0.670155883, 0, 0.0024564031, 0)
	ContentShrunken.Size = UDim2.new(0.334465146, 0, 0.160182983, 0)
	ContentShrunken.Visible = false

	UICorner_8.CornerRadius = UDim.new(0.0500000007, 0)
	UICorner_8.Parent = ContentShrunken

	UIAspectRatioConstraint_4.Parent = OuterFrame
	UIAspectRatioConstraint_4.AspectRatio = 1.245

	Close.Name = "Close"
	Close.Parent = OuterFrame
	Close.BackgroundColor3 = Color3.fromRGB(84, 34, 34)
	Close.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Close.BorderSizePixel = 0
	Close.Position = UDim2.new(0.893432915, 0, 0.0343249068, 0)
	Close.Size = UDim2.new(0.0790441632, 0, 0.125858128, 0)
	Close.ZIndex = 4
	Close.Font = Enum.Font.Gotham
	Close.Text = "X"
	Close.TextColor3 = Color3.fromRGB(255, 255, 255)
	Close.TextScaled = true
	Close.TextSize = 14.000
	Close.TextWrapped = true

	UICorner_9.CornerRadius = UDim.new(0.0500000007, 0)
	UICorner_9.Parent = Close

	UIAspectRatioConstraint_5.Parent = Close
	UIAspectRatioConstraint_5.AspectRatio = 1.004

	Toggle.Name = "Toggle"
	Toggle.Parent = OuterFrame
	Toggle.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Toggle.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Toggle.BorderSizePixel = 0
	Toggle.Position = UDim2.new(0.798575521, 0, 0.0343248919, 0)
	Toggle.Size = UDim2.new(0.0790441632, 0, 0.125858128, 0)
	Toggle.ZIndex = 4
	Toggle.Font = Enum.Font.Roboto
	Toggle.Text = "-"
	Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
	Toggle.TextScaled = true
	Toggle.TextSize = 14.000
	Toggle.TextWrapped = true

	UICorner_10.CornerRadius = UDim.new(0.0500000007, 0)
	UICorner_10.Parent = Toggle

	UIAspectRatioConstraint_6.Parent = Toggle
	UIAspectRatioConstraint_6.AspectRatio = 1.004

	return EmptyTools
end

function CreateAlert(Title_Text, Body_Text, Image_ID, Button_Text, Sub_Button_Text, TextAlignment, Callback, SubCallback)
	local AlertScreen = Instance.new("ScreenGui")
	local Overlay = Instance.new("TextButton")
	local CallDialog = Instance.new("ImageButton")
	local AlertContents = Instance.new("ImageLabel")
	local Footer = Instance.new("ImageLabel")
	local layout = Instance.new("UIListLayout")
	local margin = Instance.new("UIPadding")
	local Buttons = Instance.new("ImageLabel")
	local _1 = Instance.new("ImageButton")
	local ButtonContent = Instance.new("Frame")
	local ButtonMiddleContent = Instance.new("Frame")
	local UIListLayout = Instance.new("UIListLayout")
	local Text = Instance.new("TextLabel")
	local layout_2 = Instance.new("UIListLayout")
	local margin_2 = Instance.new("UIPadding")
	local layout_3 = Instance.new("UIListLayout")
	local MiddleContent = Instance.new("ImageLabel")
	local layout_4 = Instance.new("UIListLayout")
	local Image = Instance.new("ImageLabel")
	local layout_5 = Instance.new("UIListLayout")
	local margin_3 = Instance.new("UIPadding")
	local Image_2 = Instance.new("ImageLabel")
	local margin_4 = Instance.new("UIPadding")
	local Content = Instance.new("ImageLabel")
	local BodyText = Instance.new("TextLabel")
	local layout_6 = Instance.new("UIListLayout")
	local margin_5 = Instance.new("UIPadding")
	local TitleContainer = Instance.new("ImageLabel")
	local TitleArea = Instance.new("ImageLabel")
	local layout_7 = Instance.new("UIListLayout")
	local Title = Instance.new("TextLabel")
	local Underline = Instance.new("Frame")
	local margin_6 = Instance.new("UIPadding")
	local layout_8 = Instance.new("UIListLayout")
	local margin_7 = Instance.new("UIPadding")
	local margin_8 = Instance.new("UIPadding")

	if not Button_Text then
		Button_Text = "Ok"
	end
	if not Title_Text then
		Title_Text = "Alert"
	end

	AlertScreen.Name = "AlertScreen"
	AlertScreen.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
	AlertScreen.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	AlertScreen.IgnoreGuiInset = true
	AlertScreen.DisplayOrder = 100


	Overlay.Name = "Overlay"
	Overlay.Parent = AlertScreen
	Overlay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	Overlay.BackgroundTransparency = 0.500
	Overlay.BorderSizePixel = 0
	Overlay.Selectable = false
	Overlay.Size = UDim2.new(1, 0, 1, 0)
	Overlay.Visible = false
	Overlay.AutoButtonColor = false
	Overlay.Text = ""

	CallDialog.Name = "CallDialog"
	CallDialog.Parent = AlertScreen
	CallDialog.AnchorPoint = Vector2.new(0.5, 0.5)
	CallDialog.BackgroundColor3 = Color3.fromRGB(57, 59, 61)
	CallDialog.BackgroundTransparency = 1.000
	CallDialog.BorderSizePixel = 0
	CallDialog.ClipsDescendants = true
	CallDialog.Position = UDim2.new(0.5, 0, 0.5, 0)
	CallDialog.Selectable = false
	CallDialog.Size = UDim2.new(0, 400, 0, 182)
	CallDialog.AutoButtonColor = false
	CallDialog.Image = "rbxasset://LuaPackages/Packages/_Index/FoundationImages/FoundationImages/SpriteSheets/img_set_1x_1.png"
	CallDialog.ImageColor3 = Color3.fromRGB(57, 59, 61)
	CallDialog.ImageRectOffset = Vector2.new(402, 494)
	CallDialog.ImageRectSize = Vector2.new(17, 17)
	CallDialog.ScaleType = Enum.ScaleType.Slice
	CallDialog.SliceCenter = Rect.new(8, 8, 9, 9)
	CallDialog.AutomaticSize = Enum.AutomaticSize.Y

	AlertContents.Name = "AlertContents"
	AlertContents.Parent = CallDialog
	AlertContents.BackgroundTransparency = 1.000
	AlertContents.BorderSizePixel = 0
	AlertContents.Size = UDim2.new(0, 400, 0, 182)

	Footer.Name = "Footer"
	Footer.Parent = AlertContents
	Footer.AutomaticSize = Enum.AutomaticSize.Y
	Footer.BackgroundTransparency = 1.000
	Footer.LayoutOrder = 3
	Footer.Size = UDim2.new(1, 0, 0, 36)

	layout.Name = "$layout"
	layout.Parent = Footer
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Padding = UDim.new(0, 12)

	margin.Name = "$margin"
	margin.Parent = Footer

	Buttons.Name = "Buttons"
	Buttons.Parent = Footer
	Buttons.AutomaticSize = Enum.AutomaticSize.Y
	Buttons.BackgroundTransparency = 1.000
	Buttons.LayoutOrder = 3
	Buttons.Size = UDim2.new(1, 0, 0, 36)

	_1.Name = "1"
	_1.Parent = Buttons
	_1.BackgroundTransparency = 1.000
	_1.LayoutOrder = 1
	_1.AutomaticSize = Enum.AutomaticSize.Y
	_1.Size = UDim2.new(0, 352, 0, 36)
	_1.AutoButtonColor = false
	_1.Image = "rbxasset://LuaPackages/Packages/_Index/FoundationImages/FoundationImages/SpriteSheets/img_set_1x_1.png"
	_1.ImageRectOffset = Vector2.new(402, 494)
	_1.ImageRectSize = Vector2.new(17, 17)
	_1.ScaleType = Enum.ScaleType.Slice
	_1.SliceCenter = Rect.new(8, 8, 9, 9)

	ButtonContent.Name = "ButtonContent"
	ButtonContent.Parent = _1
	ButtonContent.BackgroundTransparency = 1.000
	ButtonContent.Size = UDim2.new(1, 0, 1, 0)

	ButtonMiddleContent.Name = "ButtonMiddleContent"
	ButtonMiddleContent.Parent = ButtonContent
	ButtonMiddleContent.BackgroundTransparency = 1.000
	ButtonMiddleContent.Size = UDim2.new(1, 0, 1, 0)

	UIListLayout.Parent = ButtonMiddleContent
	UIListLayout.FillDirection = Enum.FillDirection.Horizontal
	UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
	UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	UIListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
	UIListLayout.Padding = UDim.new(0, 5)

	Text.Name = "Text"
	Text.Parent = ButtonMiddleContent
	Text.BackgroundTransparency = 1.000
	Text.LayoutOrder = 2
	Text.Size = UDim2.new(0, 23, 0, 22)
	Text.Font = Enum.Font.BuilderSansBold
	Text.Text = Button_Text
	Text.AutomaticSize = Enum.AutomaticSize.X
	Text.TextColor3 = Color3.fromRGB(57, 59, 61)
	Text.TextSize = 20.000
	Text.TextWrapped = true

	layout_2.Name = "$layout"
	layout_2.Parent = Buttons
	layout_2.FillDirection = Enum.FillDirection.Horizontal
	layout_2.HorizontalAlignment = Enum.HorizontalAlignment.Center
	layout_2.SortOrder = Enum.SortOrder.LayoutOrder

	margin_2.Name = "$margin"
	margin_2.Parent = Buttons

	layout_3.Name = "$layout"
	layout_3.Parent = AlertContents
	layout_3.SortOrder = Enum.SortOrder.LayoutOrder
	layout_3.Padding = UDim.new(0, 24)

	MiddleContent.Name = "MiddleContent"
	MiddleContent.Parent = AlertContents
	MiddleContent.AutomaticSize = Enum.AutomaticSize.Y
	MiddleContent.BackgroundTransparency = 1.000
	MiddleContent.LayoutOrder = 2
	MiddleContent.Size = UDim2.new(1, 0, 0, 22)

	layout_4.Name = "$layout"
	layout_4.Parent = MiddleContent
	layout_4.SortOrder = Enum.SortOrder.LayoutOrder

	Image.Name = "Image"
	Image.Parent = MiddleContent
	Image.BackgroundTransparency = 1.000
	Image.LayoutOrder = 2
	Image.AutomaticSize = Enum.AutomaticSize.Y
	Image.Size = UDim2.new(1, 0, 0, 22)
	Image.Visible = false


	layout_5.Name = "$layout"
	layout_5.Parent = Image
	layout_5.SortOrder = Enum.SortOrder.LayoutOrder
	layout_5.Padding = UDim.new(0, 12)

	margin_3.Name = "$margin"
	margin_3.Parent = Image
	margin_3.PaddingBottom = UDim.new(0, 15)
	margin_3.PaddingLeft = UDim.new(0, 75)

	margin_4.Name = "$margin"
	margin_4.Parent = MiddleContent

	Content.Name = "Content"
	Content.Parent = MiddleContent
	Content.BackgroundTransparency = 1.000
	Content.AutomaticSize = Enum.AutomaticSize.Y
	Content.LayoutOrder = 2
	Content.Size = UDim2.new(1, 0, 0, 22)

	BodyText.Name = "BodyText"
	BodyText.Parent = Content
	BodyText.TextXAlignment = TextAlignment
	BodyText.BackgroundTransparency = 1.000
	BodyText.LayoutOrder = 1
	BodyText.Size = UDim2.new(1, 0, 0, 22)
	BodyText.AutomaticSize = Enum.AutomaticSize.Y
	BodyText.Font = Enum.Font.BuilderSans
	BodyText.Text = Body_Text
	BodyText.TextColor3 = Color3.fromRGB(189, 190, 190)
	BodyText.TextSize = 20.000
	BodyText.TextWrapped = true

	layout_6.Name = "$layout"
	layout_6.Parent = Content
	layout_6.SortOrder = Enum.SortOrder.LayoutOrder
	layout_6.Padding = UDim.new(0, 12)

	margin_5.Name = "$margin"
	margin_5.Parent = Content

	TitleContainer.Name = "TitleContainer"
	TitleContainer.Parent = AlertContents
	TitleContainer.BackgroundTransparency = 1.000
	TitleContainer.LayoutOrder = 1
	TitleContainer.Size = UDim2.new(1, 0, 0, 52)

	TitleArea.Name = "TitleArea"
	TitleArea.Parent = TitleContainer
	TitleArea.BackgroundTransparency = 1.000
	TitleArea.LayoutOrder = 1
	TitleArea.Size = UDim2.new(1, 0, 0, 40)

	layout_7.Name = "$layout"
	layout_7.Parent = TitleArea
	layout_7.HorizontalAlignment = Enum.HorizontalAlignment.Center
	layout_7.SortOrder = Enum.SortOrder.LayoutOrder
	layout_7.Padding = UDim.new(0, 12)

	Title.Name = "Title"
	Title.Parent = TitleArea
	Title.BackgroundTransparency = 1.000
	Title.LayoutOrder = 1
	Title.AutomaticSize = Enum.AutomaticSize.X
	Title.Size = UDim2.new(0, 14, 0, 27)
	Title.Font = Enum.Font.BuilderSansBold
	Title.Text = Title_Text
	Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title.TextSize = 25.000
	Title.TextWrapped = true

	Underline.Name = "Underline"
	Underline.Parent = TitleArea
	Underline.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Underline.BackgroundTransparency = 0.800
	Underline.BorderSizePixel = 0
	Underline.LayoutOrder = 2
	Underline.Size = UDim2.new(1, 0, 0, 1)

	margin_6.Name = "$margin"
	margin_6.Parent = TitleArea

	layout_8.Name = "$layout"
	layout_8.Parent = TitleContainer
	layout_8.HorizontalAlignment = Enum.HorizontalAlignment.Center
	layout_8.SortOrder = Enum.SortOrder.LayoutOrder
	layout_8.Padding = UDim.new(0, 8)

	margin_7.Name = "$margin"
	margin_7.Parent = TitleContainer
	margin_7.PaddingTop = UDim.new(0, 12)

	margin_8.Name = "$margin"
	margin_8.Parent = AlertContents
	margin_8.PaddingBottom = UDim.new(0, 24)
	margin_8.PaddingLeft = UDim.new(0, 24)
	margin_8.PaddingRight = UDim.new(0, 24)

	if Image_ID then
		Image.Visible = true
		Image_2.Name = "Image"
		Image_2.Parent = Image
		Image_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Image_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
		Image_2.BorderSizePixel = 0
		Image_2.BackgroundTransparency = 1
		Image_2.Size = UDim2.new(0, 200, 0, 200)
		Image_2.Image = Image_ID
		Image_2.Visible = true
	end
	_1.MouseButton1Click:Connect(function()
		AlertScreen:Destroy()
		if Callback then
			Callback()
		end
	end)

	if Sub_Button_Text then
		local SubButton = Buttons:Clone()
		SubButton.Parent = Buttons.Parent
		local SubSubButton = SubButton:FindFirstChild("1")
		local SubSubBtnClone = SubSubButton:Clone()
		SubSubBtnClone:ClearAllChildren()
		SubSubBtnClone.Parent = SubSubButton
		local UICorner = Instance.new("UICorner", SubSubBtnClone)
		local Stroke = Instance.new("UIStroke", SubSubBtnClone)
		SubSubBtnClone.ImageTransparency = 1
		Stroke.Color = Color3.fromRGB(139, 140, 143)
		Stroke.Thickness = 1.5
		SubSubButton.ImageColor3 = Color3.fromRGB(57, 59, 61)
		SubSubButton.ButtonContent.ButtonMiddleContent.Text.Text = Sub_Button_Text
		SubSubButton.ButtonContent.ButtonMiddleContent.Text.TextColor3 = Color3.fromRGB(182, 182, 182)

		local function Hover()
			SubSubButton.MouseEnter:Connect(function()
				SubSubButton.ImageColor3 = Color3.fromRGB(43, 46, 47)
			end)
			SubSubButton.MouseLeave:Connect(function()
				SubSubButton.ImageColor3 = Color3.fromRGB(57, 59, 61)
			end)
		end

		coroutine.wrap(Hover)()

		SubSubBtnClone.MouseButton1Click:Connect(function()
			AlertScreen:Destroy()
			if SubCallback then
				SubCallback()
			end
		end)
	end

	local function Hover()
		_1.MouseEnter:Connect(function()
			_1.ImageColor3 = Color3.fromRGB(172, 172, 172)
		end)
		_1.MouseLeave:Connect(function()
			_1.ImageColor3 = Color3.fromRGB(255,255,255)
		end)
	end

	coroutine.wrap(Hover)()

	return AlertScreen
end

local FadeOutTween 
local FadeOutTween2
local FadeOutTween3

local function TipView(LabelObject, Title, Text)
	local function FadeIn()
		if not TipsEnabled then
			InfoFrame.Visible = false
			return
		end
		InfoFrame.Visible = true
		InfoFrame.BackgroundTransparency = 1
		InfoFrame.Title.TextTransparency = 1
		InfoFrame.Info.TextTransparency = 1
		InfoFrame.Title.Text = Title
		InfoFrame.Info.Text = Text

		TweenService:Create(InfoFrame, FadeTweenInfo, {BackgroundTransparency = 0}):Play()
		for _, Label in pairs(InfoFrame:GetChildren()) do
			if Label:IsA("TextLabel") then
				TweenService:Create(Label, FadeTweenInfo, {TextTransparency = 0}):Play()
			end
		end
	end

	local function FadeOut()
		TweenService:Create(InfoFrame, FadeTweenInfo, {BackgroundTransparency = 1}):Play()
		TweenService:Create(InfoFrame.Title, FadeTweenInfo, {TextTransparency = 1}):Play()
		TweenService:Create(InfoFrame.Info, FadeTweenInfo, {TextTransparency = 1}):Play()
	end

	LabelObject.MouseEnter:Connect(FadeIn)
	LabelObject.MouseLeave:Connect(FadeOut)
end

function CreateCommand(TitleText, Info, InputText, EnumTable, FilterTag, CallbackRun, CallbackStop)

	local Command = Instance.new("Frame")
	local Title = Instance.new("TextLabel")
	local Input = Instance.new("TextBox")
	local UICorner = Instance.new("UICorner")
	local Run = Instance.new("ImageButton")
	local UICorner_2 = Instance.new("UICorner")
	local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
	local Stop = Instance.new("ImageButton")
	local UICorner_3 = Instance.new("UICorner")
	local UIAspectRatioConstraint_2 = Instance.new("UIAspectRatioConstraint")
	local EnumButton = Instance.new("TextButton")
	local UITextSizeConstraint = Instance.new("UITextSizeConstraint")
	local UICorner_4 = Instance.new("UICorner")

	if not table.find(CommandCategories, FilterTag) then
		table.insert(CommandCategories, FilterTag)
	end
	Command:SetAttribute("Category", FilterTag)

	local SelectedEnum
	if EnumTable ~= nil then
		SelectedEnum = EnumTable[1]
	end

	Command.Name = TitleText
	Command.BackgroundColor3 = Color3.fromRGB(85, 85, 85)
	Command.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Command.BorderSizePixel = 0
	Command.Position = UDim2.new(0, 0, 1.09406805e-07, 0)
	Command.Size = UDim2.new(1, 0, 0.0219999999, 0)

	Title.Name = "Title"
	Title.Parent = Command
	Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Title.BackgroundTransparency = 1.000
	Title.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Title.BorderSizePixel = 0
	Title.Position = UDim2.new(0.0238096155, 0, 0.0882355049, 0)
	Title.Size = UDim2.new(0.323765904, 0, 0.823529363, 0)
	Title.Font = Enum.Font.Gotham
	Title.Text = TitleText
	Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title.TextScaled = true
	Title.TextSize = 14.000
	Title.TextWrapped = true
	Title.TextXAlignment = Enum.TextXAlignment.Left

	TipView(Title, TitleText, Info)

	if InputText ~= nil then
		Input.Name = "Input"
		Input.Parent = Command
		Input.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		Input.BorderColor3 = Color3.fromRGB(0, 0, 0)
		Input.BorderSizePixel = 0
		Input.Position = UDim2.new(0.549000025, 0, 0.074000001, 0)
		Input.Size = UDim2.new(0.263412803, 0, 0.805496335, 0)
		Input.ClearTextOnFocus = false
		Input.Font = Enum.Font.Gotham
		Input.PlaceholderColor3 = Color3.fromRGB(126, 126, 126)
		Input.PlaceholderText = InputText
		Input.Text = ""
		Input.TextColor3 = Color3.fromRGB(255, 255, 255)
		Input.TextScaled = true
		Input.TextSize = 25.000
		Input.TextWrapped = true
	end

	UICorner.CornerRadius = UDim.new(0.25, 0)
	UICorner.Parent = Input

	Run.Name = "Run"
	Run.Parent = Command
	Run.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Run.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Run.BorderSizePixel = 0
	Run.Position = UDim2.new(0.907579541, 0, 0.0597809143, 0)
	Run.Size = UDim2.new(0.0637670681, 0, 0.850548923, 0)
	Run.Image = "http://www.roblox.com/asset/?id=18912253064"
	Run.ImageColor3 = Color3.fromRGB(106, 189, 102)
	Run.MouseButton1Click:Connect(function()
		--PlaySoundFromID(ClickSoundID, {Volume = 0.4})
		if InputText ~= nil then
			if SelectedEnum then
				CallbackRun(Input.Text, SelectedEnum)
			else
				CallbackRun(Input.Text)
			end
		elseif SelectedEnum then
			CallbackRun(SelectedEnum)
		else
			CallbackRun()
		end
	end)

	UICorner_2.CornerRadius = UDim.new(0.189999998, 0)
	UICorner_2.Parent = Run

	UIAspectRatioConstraint.Parent = Run

	if CallbackStop ~= nil then
		Stop.Name = "Stop"
		Stop.Parent = Command
		Stop.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		Stop.BorderColor3 = Color3.fromRGB(0, 0, 0)
		Stop.BorderSizePixel = 0
		Stop.Position = UDim2.new(0.829146743, 0, 0.0597800016, 0)
		Stop.Size = UDim2.new(0.0637670681, 0, 0.880439401, 0)
		Stop.Image = "http://www.roblox.com/asset/?id=18912262996"
		Stop.ImageColor3 = Color3.fromRGB(180, 92, 92)
		Stop.MouseButton1Click:Connect(function()
			--PlaySoundFromID(ClickSoundID, {Volume = 0.4})
			CallbackStop()
		end)
	end

	UICorner_3.CornerRadius = UDim.new(0.189999998, 0)
	UICorner_3.Parent = Stop

	UIAspectRatioConstraint_2.Parent = Stop

	if EnumTable ~= nil then
		EnumButton.Name = "Enum"
		EnumButton.Parent = Command
		EnumButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		EnumButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
		EnumButton.BorderSizePixel = 0
		EnumButton.Position = UDim2.new(0.271358907, 0, 0.0963262469, 0)
		EnumButton.Size = UDim2.new(0.263000011, 0, 0.805000007, 0)
		EnumButton.Font = Enum.Font.Gotham
		EnumButton.Text = EnumTable[1]
		EnumButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		EnumButton.TextScaled = true
		EnumButton.TextSize = 25.000
		EnumButton.TextWrapped = true


		EnumButton.MouseButton1Click:Connect(function()
			local CurrentIndex = table.find(EnumTable, SelectedEnum)
			if CurrentIndex == #EnumTable then
				SelectedEnum = EnumTable[1]
			else
				SelectedEnum = EnumTable[CurrentIndex + 1]
			end
			EnumButton.Text = SelectedEnum
		end)
	end


	UITextSizeConstraint.Parent = EnumButton
	UITextSizeConstraint.MaxTextSize = 25

	UICorner_4.CornerRadius = UDim.new(0.189999998, 0)
	UICorner_4.Parent = EnumButton

	table.insert(CommandFrames, Command)
	Command.Parent = Contents:WaitForChild("Commands")
end

local function CreateMarker(TargetPlayer)
	local Marker = Instance.new("BillboardGui")
	local Frame = Instance.new("Frame")
	local User = Instance.new("TextLabel")
	local UICorner = Instance.new("UICorner")
	local Display = Instance.new("TextLabel")
	local Button = Instance.new("ImageButton")
	local Stroke = Instance.new("UIStroke")

	--Properties:

	Marker.Name = TargetPlayer.Name
	Marker.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	Marker.Active = true
	Marker.Adornee = TargetPlayer.Character.HumanoidRootPart
	Marker.AlwaysOnTop = true
	Marker.LightInfluence = 1.000
	Marker.Size = UDim2.new(0, 150, 0, 60)

	Frame.Parent = Marker
	Frame.AnchorPoint = Vector2.new(0.5, 0.5)
	Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Frame.BackgroundTransparency = 0.2
	Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Frame.BorderSizePixel = 0
	Frame.Position = UDim2.new(0.5, 0, 0.5, 0)
	Frame.Size = UDim2.new(0.800000012, 0, 0.600000024, 0)

	User.Name = "User"
	User.Parent = Frame
	User.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	User.BackgroundTransparency = 1.000
	User.BorderColor3 = Color3.fromRGB(0, 0, 0)
	User.BorderSizePixel = 0
	User.Size = UDim2.new(1, 0, 0.5, 0)
	User.Font = Enum.Font.GothamBold
	User.Text = TargetPlayer.DisplayName
	User.TextColor3 = Color3.fromRGB(255, 255, 255)
	User.TextScaled = true
	User.TextSize = 14.000
	User.TextWrapped = true

	UICorner.Parent = Frame

	Display.Name = "Display"
	Display.Parent = Frame
	Display.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Display.BackgroundTransparency = 1.000
	Display.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Display.BorderSizePixel = 0
	Display.Position = UDim2.new(0, 0, 0.5, 0)
	Display.Size = UDim2.new(1, 0, 0.449999988, 0)
	Display.Font = Enum.Font.Gotham
	Display.Text = "@" .. TargetPlayer.Name
	Display.TextColor3 = Color3.fromRGB(255, 255, 255)
	Display.TextScaled = true
	Display.TextSize = 14.000
	Display.TextWrapped = true

	Button.Name = "Button"
	Button.Parent = Marker
	Button.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Button.BackgroundTransparency = 1.000
	Button.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Button.BorderSizePixel = 0
	Button.Size = UDim2.new(1, 0, 1, 0)
	Button.ZIndex = 3
	Button.Image = "http://www.roblox.com/asset/?id=1415236683"

	Stroke.Name = "Select"
	Stroke.Color = Color3.fromRGB(255,255,255)
	Stroke.Thickness = 0
	Stroke.Parent = Frame

	Button.MouseEnter:Connect(function()
		Stroke.Thickness = 0
		TweenService:Create(Stroke, FadeTweenInfo, {Thickness = 2}):Play()
	end)
	Button.MouseLeave:Connect(function()
		TweenService:Create(Stroke, FadeTweenInfo, {Thickness = 0}):Play()
	end)

	return Marker, Button
end

-- Freecam Setup (Long)

local pi    = math.pi
local abs   = math.abs
local clamp = math.clamp
local exp   = math.exp
local rad   = math.rad
local sign  = math.sign
local sqrt  = math.sqrt
local tan   = math.tan

local ContextActionService = game:GetService("ContextActionService")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local Settings = UserSettings()
local GameSettings = Settings.GameSettings

local LocalPlayer = Players.LocalPlayer
if not LocalPlayer then
	Players:GetPropertyChangedSignal("LocalPlayer"):Wait()
	LocalPlayer = Players.LocalPlayer
end

local Camera = Workspace.CurrentCamera
Workspace:GetPropertyChangedSignal("CurrentCamera"):Connect(function()
	local newCamera = Workspace.CurrentCamera
	if newCamera then
		Camera = newCamera
	end
end)

local FFlagUserExitFreecamBreaksWithShiftlock
do
	local success, result = pcall(function()
		return UserSettings():IsUserFeatureEnabled("UserExitFreecamBreaksWithShiftlock")
	end)
	FFlagUserExitFreecamBreaksWithShiftlock = success and result
end

------------------------------------------------------------------------

local INPUT_PRIORITY = Enum.ContextActionPriority.High.Value

local NAV_GAIN = Vector3.new(1, 1, 1)*64
local PAN_GAIN = Vector2.new(0.75, 1)*8
local FOV_GAIN = 300

local PITCH_LIMIT = rad(90)

local VEL_STIFFNESS = 1.5
local PAN_STIFFNESS = 1.0
local FOV_STIFFNESS = 4.0

------------------------------------------------------------------------

local Spring = {} do
	Spring.__index = Spring

	function Spring.new(freq, pos)
		local self = setmetatable({}, Spring)
		self.f = freq
		self.p = pos
		self.v = pos*0
		return self
	end

	function Spring:Update(dt, goal)
		local f = self.f*2*pi
		local p0 = self.p
		local v0 = self.v

		local offset = goal - p0
		local decay = exp(-f*dt)

		local p1 = goal + (v0*dt - offset*(f*dt + 1))*decay
		local v1 = (f*dt*(offset*f - v0) + v0)*decay

		self.p = p1
		self.v = v1

		return p1
	end

	function Spring:Reset(pos)
		self.p = pos
		self.v = pos*0
	end
end

------------------------------------------------------------------------

local cameraPos = Vector3.new()
local cameraRot = Vector2.new()
local cameraFov = 0

local velSpring = Spring.new(VEL_STIFFNESS, Vector3.new())
local panSpring = Spring.new(PAN_STIFFNESS, Vector2.new())
local fovSpring = Spring.new(FOV_STIFFNESS, 0)

------------------------------------------------------------------------

local Input = {} do
	local thumbstickCurve do
		local K_CURVATURE = 2.0
		local K_DEADZONE = 0.15

		local function fCurve(x)
			return (exp(K_CURVATURE*x) - 1)/(exp(K_CURVATURE) - 1)
		end

		local function fDeadzone(x)
			return fCurve((x - K_DEADZONE)/(1 - K_DEADZONE))
		end

		function thumbstickCurve(x)
			return sign(x)*clamp(fDeadzone(abs(x)), 0, 1)
		end
	end

	local gamepad = {
		ButtonX = 0,
		ButtonY = 0,
		DPadDown = 0,
		DPadUp = 0,
		ButtonL2 = 0,
		ButtonR2 = 0,
		Thumbstick1 = Vector2.new(),
		Thumbstick2 = Vector2.new(),
	}

	local keyboard = {
		W = 0,
		A = 0,
		S = 0,
		D = 0,
		E = 0,
		Q = 0,
		U = 0,
		H = 0,
		J = 0,
		K = 0,
		I = 0,
		Y = 0,
		Up = 0,
		Down = 0,
		LeftShift = 0,
		RightShift = 0,
	}

	local mouse = {
		Delta = Vector2.new(),
		MouseWheel = 0,
	}

	local NAV_GAMEPAD_SPEED  = Vector3.new(1, 1, 1)
	local NAV_KEYBOARD_SPEED = Vector3.new(1, 1, 1)
	local PAN_MOUSE_SPEED    = Vector2.new(1, 1)*(pi/64)
	local PAN_GAMEPAD_SPEED  = Vector2.new(1, 1)*(pi/8)
	local FOV_WHEEL_SPEED    = 1.0
	local FOV_GAMEPAD_SPEED  = 0.25
	local NAV_ADJ_SPEED      = 0.75
	local NAV_SHIFT_MUL      = 0.25

	local navSpeed = 1

	function Input.Vel(dt)
		navSpeed = clamp(navSpeed + dt*(keyboard.Up - keyboard.Down)*NAV_ADJ_SPEED, 0.01, 4)

		local kGamepad = Vector3.new(
			thumbstickCurve(gamepad.Thumbstick1.X),
			thumbstickCurve(gamepad.ButtonR2) - thumbstickCurve(gamepad.ButtonL2),
			thumbstickCurve(-gamepad.Thumbstick1.Y)
		)*NAV_GAMEPAD_SPEED

		local kKeyboard = Vector3.new(
			keyboard.D - keyboard.A + keyboard.K - keyboard.H,
			keyboard.E - keyboard.Q + keyboard.I - keyboard.Y,
			keyboard.S - keyboard.W + keyboard.J - keyboard.U
		)*NAV_KEYBOARD_SPEED

		local shift = UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) or UserInputService:IsKeyDown(Enum.KeyCode.RightShift)

		return (kGamepad + kKeyboard)*(navSpeed*(shift and NAV_SHIFT_MUL or 1))
	end

	function Input.Pan(dt)
		local kGamepad = Vector2.new(
			thumbstickCurve(gamepad.Thumbstick2.Y),
			thumbstickCurve(-gamepad.Thumbstick2.X)
		)*PAN_GAMEPAD_SPEED
		local kMouse = mouse.Delta*PAN_MOUSE_SPEED
		mouse.Delta = Vector2.new()
		return kGamepad + kMouse
	end

	function Input.Fov(dt)
		local kGamepad = (gamepad.ButtonX - gamepad.ButtonY)*FOV_GAMEPAD_SPEED
		local kMouse = mouse.MouseWheel*FOV_WHEEL_SPEED
		mouse.MouseWheel = 0
		return kGamepad + kMouse
	end

	do
		local function Keypress(action, state, input)
			keyboard[input.KeyCode.Name] = state == Enum.UserInputState.Begin and 1 or 0
			return Enum.ContextActionResult.Sink
		end

		local function GpButton(action, state, input)
			gamepad[input.KeyCode.Name] = state == Enum.UserInputState.Begin and 1 or 0
			return Enum.ContextActionResult.Sink
		end

		local function MousePan(action, state, input)
			local delta = input.Delta
			mouse.Delta = Vector2.new(-delta.y, -delta.x)
			return Enum.ContextActionResult.Sink
		end

		local function Thumb(action, state, input)
			gamepad[input.KeyCode.Name] = input.Position
			return Enum.ContextActionResult.Sink
		end

		local function Trigger(action, state, input)
			gamepad[input.KeyCode.Name] = input.Position.z
			return Enum.ContextActionResult.Sink
		end

		local function MouseWheel(action, state, input)
			mouse[input.UserInputType.Name] = -input.Position.z
			return Enum.ContextActionResult.Sink
		end

		local function Zero(t)
			for k, v in pairs(t) do
				t[k] = v*0
			end
		end

		function Input.StartCapture()
			ContextActionService:BindActionAtPriority("FreecamKeyboard", Keypress, false, INPUT_PRIORITY,
				Enum.KeyCode.W, Enum.KeyCode.U,
				Enum.KeyCode.A, Enum.KeyCode.H,
				Enum.KeyCode.S, Enum.KeyCode.J,
				Enum.KeyCode.D, Enum.KeyCode.K,
				Enum.KeyCode.E, Enum.KeyCode.I,
				Enum.KeyCode.Q, Enum.KeyCode.Y,
				Enum.KeyCode.Up, Enum.KeyCode.Down
			)
			ContextActionService:BindActionAtPriority("FreecamMousePan",          MousePan,   false, INPUT_PRIORITY, Enum.UserInputType.MouseMovement)
			ContextActionService:BindActionAtPriority("FreecamMouseWheel",        MouseWheel, false, INPUT_PRIORITY, Enum.UserInputType.MouseWheel)
			ContextActionService:BindActionAtPriority("FreecamGamepadButton",     GpButton,   false, INPUT_PRIORITY, Enum.KeyCode.ButtonX, Enum.KeyCode.ButtonY, Enum.KeyCode.DPadDown, Enum.KeyCode.DPadUp)
			ContextActionService:BindActionAtPriority("FreecamGamepadTrigger",    Trigger,    false, INPUT_PRIORITY, Enum.KeyCode.ButtonR2, Enum.KeyCode.ButtonL2)
			ContextActionService:BindActionAtPriority("FreecamGamepadThumbstick", Thumb,      false, INPUT_PRIORITY, Enum.KeyCode.Thumbstick1, Enum.KeyCode.Thumbstick2)
		end

		function Input.StopCapture()
			navSpeed = 1
			Zero(gamepad)
			Zero(keyboard)
			Zero(mouse)
			ContextActionService:UnbindAction("FreecamKeyboard")
			ContextActionService:UnbindAction("FreecamMousePan")
			ContextActionService:UnbindAction("FreecamMouseWheel")
			ContextActionService:UnbindAction("FreecamGamepadButton")
			ContextActionService:UnbindAction("FreecamGamepadTrigger")
			ContextActionService:UnbindAction("FreecamGamepadThumbstick")
		end
	end
end

------------------------------------------------------------------------

local function GetFocusDistance(cameraFrame)
	local znear = 0.1
	local viewport = Camera.ViewportSize
	local projy = 2*tan(cameraFov/2)
	local projx = viewport.x/viewport.y*projy
	local fx = cameraFrame.rightVector
	local fy = cameraFrame.upVector
	local fz = cameraFrame.lookVector

	local minVect = Vector3.new()
	local minDist = 512

	for x = 0, 1, 0.5 do
		for y = 0, 1, 0.5 do
			local cx = (x - 0.5)*projx
			local cy = (y - 0.5)*projy
			local offset = fx*cx - fy*cy + fz
			local origin = cameraFrame.p + offset*znear
			local _, hit = Workspace:FindPartOnRay(Ray.new(origin, offset.unit*minDist))
			local dist = (hit - origin).magnitude
			if minDist > dist then
				minDist = dist
				minVect = offset.unit
			end
		end
	end

	return fz:Dot(minVect)*minDist
end

local function StepFreecam(dt)
	local vel = velSpring:Update(dt, Input.Vel(dt))
	local pan = panSpring:Update(dt, Input.Pan(dt))
	local fov = fovSpring:Update(dt, Input.Fov(dt))

	local zoomFactor = sqrt(tan(rad(70/2))/tan(rad(cameraFov/2)))

	cameraFov = clamp(cameraFov + fov*FOV_GAIN*dt, 1, 120)
	cameraRot = cameraRot + pan*PAN_GAIN*(dt*zoomFactor)
	cameraRot = Vector2.new(clamp(cameraRot.x, -PITCH_LIMIT, PITCH_LIMIT), cameraRot.y)

	local cameraCFrame = CFrame.new(cameraPos)*CFrame.fromOrientation(cameraRot.x, cameraRot.y, 0)*CFrame.new(vel*NAV_GAIN*dt)
	cameraPos = cameraCFrame.p

	Camera.CFrame = cameraCFrame
	Camera.Focus = cameraCFrame*CFrame.new(0, 0, -GetFocusDistance(cameraCFrame))
	Camera.FieldOfView = cameraFov
end

------------------------------------------------------------------------

local function StartFreecam()
	local cameraCFrame = Camera.CFrame
	local pitch, yaw, roll = cameraCFrame:ToEulerAnglesYXZ()

	cameraPos = cameraCFrame.p
	cameraRot = Vector2.new(pitch, yaw)
	cameraFov = Camera.FieldOfView

	velSpring:Reset(Vector3.new())
	panSpring:Reset(Vector2.new())
	fovSpring:Reset(0)

	Input.StartCapture()
	RunService:BindToRenderStep("Freecam", Enum.RenderPriority.Camera.Value, StepFreecam)
end

local function StopFreecam()
	Input.StopCapture()
	RunService:UnbindFromRenderStep("Freecam")
end

-- Misc Methods

local function GetCharacter(Target)
	local Character = Target.Character
	if not Character then
		Target.CharacterAdded:Wait()
		Character = Target.Character
		return Character
	end
	return Character
end

local function GetRoot(Target)
	local Character = GetCharacter(Target)
	if Character then
		local Root = Character:FindFirstChild("HumanoidRootPart")
		return Root
	end
end

local function GetPlayerFromNameSnippet(Snippet)
	for _,User in pairs(Players:GetPlayers()) do
		if User == Player then continue end
		local LoweredName = string.lower(User.Name)
		local LoweredDisplay = string.lower(User.DisplayName)
		if string.sub(LoweredName, 1, #Snippet) == Snippet 
			or string.sub(LoweredDisplay, 1, #Snippet) == Snippet then
			return User
		end
	end
end

local function CreateTeleportIndicator()
	local Indicator = Instance.new("Part")
	Indicator.Shape = Enum.PartType.Cylinder
	Indicator.Anchored = true
	Indicator.CanCollide = true
	Indicator.Color = Color3.fromRGB(0,255,0)
	Indicator.Material = Enum.Material.Neon
	Indicator.Transparency = 0.8
	Indicator.Size = Vector3.new(0.097, 4.413, 2.379)
	Indicator.Name = "TP_Indicator"
	Indicator.Orientation = Vector3.new(0,90,90)
	local Model = Instance.new("Model", workspace)
	Indicator.Position = Model.WorldPivot.Position
	Indicator.Parent = Model
	return Model
end

local function TeleportToPlayer(PlayerTarget)
	local Root = GetRoot(Player)
	local TargetRoot = GetRoot(PlayerTarget)
	TargetRoot.Velocity = Vector3.zero
	if not TargetRoot then return end
	Root.CFrame = TargetRoot.CFrame
end

local function StopPlayerAnimation()
	local animator = GetCharacter(Player).Humanoid:FindFirstChildOfClass("Animator")
	if animator then
		for _, track in ipairs(animator:GetPlayingAnimationTracks()) do
			track:Stop()
		end
	end
end

local function PlayEmote(ID)
	ID = tonumber(ID)
	local Character = GetCharacter(Player)
	local Humanoid = Character.Humanoid
	local EmoteArray =
		{
			["NEW_EMOTE"] = {ID}
		}
	Humanoid.HumanoidDescription:SetEmotes(EmoteArray)
	wait()
	Humanoid:PlayEmote("NEW_EMOTE")
end

local function ShowChangeLogs(DSA, ClickCallback)
	local SubText = "Don't show again"
	if not DSA then
		SubText = nil
	end
	return CreateAlert(
		"Empty Tools " .. VersionString .. " | What's New?", 
		ChangeLog,
		"http://www.roblox.com/asset/?id=18941848597", 
		"Ok", 
		SubText,
		Enum.TextXAlignment.Left,
		ClickCallback,
		function()
			ClickCallback()
			Player:SetAttribute("NoChangeLogs", true)
		end
	)
end

-- Link Control

local function CreateLinkAlert(ID)
	-- Gui to Lua
	-- Version: 3.2

	-- Instances:

	local AlertScreen = Instance.new("ScreenGui")
	local Overlay = Instance.new("TextButton")
	local CallDialog = Instance.new("ImageButton")
	local AlertContents = Instance.new("ImageLabel")
	local Footer = Instance.new("ImageLabel")
	local layout = Instance.new("UIListLayout")
	local margin = Instance.new("UIPadding")
	local Buttons = Instance.new("ImageLabel")
	local _1 = Instance.new("ImageButton")
	local ButtonContent = Instance.new("Frame")
	local ButtonMiddleContent = Instance.new("Frame")
	local UIListLayout = Instance.new("UIListLayout")
	local Text = Instance.new("TextLabel")
	local layout_2 = Instance.new("UIListLayout")
	local margin_2 = Instance.new("UIPadding")
	local layout_3 = Instance.new("UIListLayout")
	local MiddleContent = Instance.new("ImageLabel")
	local layout_4 = Instance.new("UIListLayout")
	local margin_3 = Instance.new("UIPadding")
	local Image = Instance.new("ImageLabel")
	local layout_5 = Instance.new("UIListLayout")
	local margin_4 = Instance.new("UIPadding")
	local Image_2 = Instance.new("ImageLabel")
	local Content = Instance.new("ImageLabel")
	local BodyText = Instance.new("TextLabel")
	local layout_6 = Instance.new("UIListLayout")
	local margin_5 = Instance.new("UIPadding")
	local Content_2 = Instance.new("ImageLabel")
	local layout_7 = Instance.new("UIListLayout")
	local margin_6 = Instance.new("UIPadding")
	local TextBox = Instance.new("TextBox")
	local TitleContainer = Instance.new("ImageLabel")
	local TitleArea = Instance.new("ImageLabel")
	local layout_8 = Instance.new("UIListLayout")
	local Title = Instance.new("TextLabel")
	local Underline = Instance.new("Frame")
	local margin_7 = Instance.new("UIPadding")
	local layout_9 = Instance.new("UIListLayout")
	local margin_8 = Instance.new("UIPadding")
	local margin_9 = Instance.new("UIPadding")

	--Properties:

	AlertScreen.Name = "LinkScreen"
	AlertScreen.Parent = Player:WaitForChild("PlayerGui")
	AlertScreen.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	AlertScreen.DisplayOrder = 100

	Overlay.Name = "Overlay"
	Overlay.Parent = AlertScreen
	Overlay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	Overlay.BackgroundTransparency = 0.500
	Overlay.BorderSizePixel = 0
	Overlay.Selectable = false
	Overlay.Size = UDim2.new(1, 0, 1, 0)
	Overlay.Visible = false
	Overlay.AutoButtonColor = false
	Overlay.Text = ""

	CallDialog.Name = "CallDialog"
	CallDialog.Parent = AlertScreen
	CallDialog.AnchorPoint = Vector2.new(0.5, 0.5)
	CallDialog.BackgroundColor3 = Color3.fromRGB(57, 59, 61)
	CallDialog.BackgroundTransparency = 1.000
	CallDialog.BorderSizePixel = 0
	CallDialog.ClipsDescendants = true
	CallDialog.AutomaticSize = Enum.AutomaticSize.Y
	CallDialog.Position = UDim2.new(0.5, 0, 0.5, 0)
	CallDialog.Selectable = false
	CallDialog.Size = UDim2.new(0, 400, 0, 182)
	CallDialog.AutoButtonColor = false
	CallDialog.Image = "rbxasset://LuaPackages/Packages/_Index/FoundationImages/FoundationImages/SpriteSheets/img_set_1x_1.png"
	CallDialog.ImageColor3 = Color3.fromRGB(57, 59, 61)
	CallDialog.ImageRectOffset = Vector2.new(402, 494)
	CallDialog.ImageRectSize = Vector2.new(17, 17)
	CallDialog.ScaleType = Enum.ScaleType.Slice
	CallDialog.SliceCenter = Rect.new(8, 8, 9, 9)

	AlertContents.Name = "AlertContents"
	AlertContents.Parent = CallDialog
	AlertContents.BackgroundTransparency = 1.000
	AlertContents.BorderSizePixel = 0
	AlertContents.Size = UDim2.new(0, 400, 0, 182)

	Footer.Name = "Footer"
	Footer.Parent = AlertContents
	Footer.AutomaticSize = Enum.AutomaticSize.Y
	Footer.BackgroundTransparency = 1.000
	Footer.LayoutOrder = 3
	Footer.Size = UDim2.new(1, 0, 0, 36)

	layout.Name = "$layout"
	layout.Parent = Footer
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Padding = UDim.new(0, 12)

	margin.Name = "$margin"
	margin.Parent = Footer

	Buttons.Name = "Buttons"
	Buttons.Parent = Footer
	Buttons.BackgroundTransparency = 1.000
	Buttons.LayoutOrder = 3
	Buttons.Size = UDim2.new(1, 0, 0, 36)

	_1.Name = "1"
	_1.Parent = Buttons
	_1.BackgroundTransparency = 1.000
	_1.LayoutOrder = 1
	_1.Size = UDim2.new(0, 352, 0, 36)
	_1.AutoButtonColor = false
	_1.Image = "rbxasset://LuaPackages/Packages/_Index/FoundationImages/FoundationImages/SpriteSheets/img_set_1x_1.png"
	_1.ImageRectOffset = Vector2.new(402, 494)
	_1.ImageRectSize = Vector2.new(17, 17)
	_1.ScaleType = Enum.ScaleType.Slice
	_1.SliceCenter = Rect.new(8, 8, 9, 9)

	ButtonContent.Name = "ButtonContent"
	ButtonContent.Parent = _1
	ButtonContent.BackgroundTransparency = 1.000
	ButtonContent.Size = UDim2.new(1, 0, 1, 0)

	ButtonMiddleContent.Name = "ButtonMiddleContent"
	ButtonMiddleContent.Parent = ButtonContent
	ButtonMiddleContent.BackgroundTransparency = 1.000
	ButtonMiddleContent.Size = UDim2.new(1, 0, 1, 0)

	UIListLayout.Parent = ButtonMiddleContent
	UIListLayout.FillDirection = Enum.FillDirection.Horizontal
	UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
	UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	UIListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
	UIListLayout.Padding = UDim.new(0, 5)

	Text.Name = "Text"
	Text.Parent = ButtonMiddleContent
	Text.BackgroundTransparency = 1.000
	Text.LayoutOrder = 2
	Text.Size = UDim2.new(0, 23, 0, 22)
	Text.Font = Enum.Font.BuilderSansBold
	Text.Text = "Done"
	Text.AutomaticSize = Enum.AutomaticSize.X
	Text.TextColor3 = Color3.fromRGB(57, 59, 61)
	Text.TextSize = 20.000
	Text.TextWrapped = true

	layout_2.Name = "$layout"
	layout_2.Parent = Buttons
	layout_2.FillDirection = Enum.FillDirection.Horizontal
	layout_2.HorizontalAlignment = Enum.HorizontalAlignment.Center
	layout_2.SortOrder = Enum.SortOrder.LayoutOrder

	margin_2.Name = "$margin"
	margin_2.Parent = Buttons

	layout_3.Name = "$layout"
	layout_3.Parent = AlertContents
	layout_3.SortOrder = Enum.SortOrder.LayoutOrder
	layout_3.Padding = UDim.new(0, 24)

	MiddleContent.Name = "MiddleContent"
	MiddleContent.Parent = AlertContents
	MiddleContent.BackgroundTransparency = 1.000
	MiddleContent.LayoutOrder = 2
	MiddleContent.AutomaticSize = Enum.AutomaticSize.Y
	MiddleContent.Size = UDim2.new(1, 0, 0, 22)

	layout_4.Name = "$layout"
	layout_4.Parent = MiddleContent
	layout_4.SortOrder = Enum.SortOrder.LayoutOrder

	margin_3.Name = "$margin"
	margin_3.Parent = MiddleContent

	Image.Name = "Image"
	Image.Parent = MiddleContent
	Image.BackgroundTransparency = 1.000
	Image.LayoutOrder = 2
	Image.Size = UDim2.new(1, 0, 0, 22)
	Image.Visible = false

	layout_5.Name = "$layout"
	layout_5.Parent = Image
	layout_5.SortOrder = Enum.SortOrder.LayoutOrder
	layout_5.Padding = UDim.new(0, 12)

	margin_4.Name = "$margin"
	margin_4.Parent = Image
	margin_4.PaddingBottom = UDim.new(0, 15)
	margin_4.PaddingLeft = UDim.new(0, 75)

	Image_2.Name = "Image"
	Image_2.Parent = Image
	Image_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Image_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Image_2.BorderSizePixel = 0
	Image_2.Size = UDim2.new(0, 200, 0, 200)
	Image_2.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"

	Content.Name = "Content"
	Content.Parent = MiddleContent
	Content.BackgroundTransparency = 1.000
	Content.LayoutOrder = 2
	Content.AutomaticSize = Enum.AutomaticSize.Y
	Content.Size = UDim2.new(1, 0, 0, 22)

	BodyText.Name = "BodyText"
	BodyText.Parent = Content
	BodyText.BackgroundTransparency = 1.000
	BodyText.LayoutOrder = 1
	BodyText.AutomaticSize = Enum.AutomaticSize.Y
	BodyText.Size = UDim2.new(1, 0, 0, 22)
	BodyText.Font = Enum.Font.BuilderSans
	BodyText.Text = "Copy the code below and send it to another user with Empty Tools to allow them to join this game instance."
	BodyText.TextColor3 = Color3.fromRGB(189, 190, 190)
	BodyText.TextSize = 20.000
	BodyText.TextWrapped = true

	layout_6.Name = "$layout"
	layout_6.Parent = Content
	layout_6.SortOrder = Enum.SortOrder.LayoutOrder
	layout_6.Padding = UDim.new(0, 12)

	margin_5.Name = "$margin"
	margin_5.Parent = Content

	Content_2.Name = "Content"
	Content_2.Parent = MiddleContent
	Content_2.BackgroundTransparency = 1.000
	Content_2.LayoutOrder = 2
	Content_2.Position = UDim2.new(0, 0, 0.520437717, 0)
	Content_2.Size = UDim2.new(1, 0, 0.276637852, 22)

	layout_7.Name = "$layout"
	layout_7.Parent = Content_2
	layout_7.SortOrder = Enum.SortOrder.LayoutOrder
	layout_7.Padding = UDim.new(0, 12)

	margin_6.Name = "$margin"
	margin_6.Parent = Content_2
	margin_6.PaddingLeft = UDim.new(0, 22)
	margin_6.PaddingTop = UDim.new(0, 20)

	TextBox.Parent = Content_2
	TextBox.AnchorPoint = Vector2.new(0.5, 0.5)
	TextBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	TextBox.BackgroundTransparency = 1.000
	TextBox.BorderColor3 = Color3.fromRGB(0, 0, 0)
	TextBox.BorderSizePixel = 0
	TextBox.Position = UDim2.new(0.431250006, 0, 0.669518828, 0)
	TextBox.Size = UDim2.new(0.9375, 0, 1.33903766, 0)
	TextBox.ClearTextOnFocus = false
	TextBox.Font = Enum.Font.Unknown
	TextBox.TextEditable = false
	TextBox.PlaceholderColor3 = Color3.fromRGB(255, 255, 255)
	TextBox.Text = ID
	TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
	TextBox.TextScaled = true
	TextBox.TextWrapped = true

	TitleContainer.Name = "TitleContainer"
	TitleContainer.Parent = AlertContents
	TitleContainer.BackgroundTransparency = 1.000
	TitleContainer.LayoutOrder = 1
	TitleContainer.Size = UDim2.new(1, 0, 0, 52)

	TitleArea.Name = "TitleArea"
	TitleArea.Parent = TitleContainer
	TitleArea.BackgroundTransparency = 1.000
	TitleArea.LayoutOrder = 1
	TitleArea.Size = UDim2.new(1, 0, 0, 40)

	layout_8.Name = "$layout"
	layout_8.Parent = TitleArea
	layout_8.HorizontalAlignment = Enum.HorizontalAlignment.Center
	layout_8.SortOrder = Enum.SortOrder.LayoutOrder
	layout_8.Padding = UDim.new(0, 12)

	Title.Name = "Title"
	Title.Parent = TitleArea
	Title.BackgroundTransparency = 1.000
	Title.LayoutOrder = 1
	Title.AutomaticSize = Enum.AutomaticSize.X
	Title.Size = UDim2.new(0, 14, 0, 27)
	Title.Font = Enum.Font.BuilderSansBold
	Title.Text = "Link Code"
	Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title.TextSize = 25.000
	Title.TextWrapped = true

	Underline.Name = "Underline"
	Underline.Parent = TitleArea
	Underline.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Underline.BackgroundTransparency = 0.800
	Underline.BorderSizePixel = 0
	Underline.LayoutOrder = 2
	Underline.Size = UDim2.new(1, 0, 0, 1)

	margin_7.Name = "$margin"
	margin_7.Parent = TitleArea

	layout_9.Name = "$layout"
	layout_9.Parent = TitleContainer
	layout_9.HorizontalAlignment = Enum.HorizontalAlignment.Center
	layout_9.SortOrder = Enum.SortOrder.LayoutOrder
	layout_9.Padding = UDim.new(0, 8)

	margin_8.Name = "$margin"
	margin_8.Parent = TitleContainer
	margin_8.PaddingTop = UDim.new(0, 12)

	margin_9.Name = "$margin"
	margin_9.Parent = AlertContents
	margin_9.PaddingBottom = UDim.new(0, 24)
	margin_9.PaddingLeft = UDim.new(0, 24)
	margin_9.PaddingRight = UDim.new(0, 24)

	local function Hover()
		_1.MouseEnter:Connect(function()
			_1.ImageColor3 = Color3.fromRGB(172, 172, 172)
		end)
		_1.MouseLeave:Connect(function()
			_1.ImageColor3 = Color3.fromRGB(255,255,255)
		end)
	end

	coroutine.wrap(Hover)()

	_1.MouseButton1Click:Connect(function()
		AlertScreen.Parent = nil
		AlertScreen:Destroy()
	end)


	return AlertScreen
end

local function CreateLinkKey(JobId)
	local result = JobId:gsub("-", "")
	return result .. "-" .. game.PlaceId
end


local function RecieveLinkKey(linkKey)
	local lastDashIndex = linkKey:find("-%w+$")

	local placeId = string.sub(linkKey, lastDashIndex + 1)
	
	local jobIdWithoutPlaceId = string.sub(linkKey, 1, lastDashIndex - 1)
	local formattedJobId = string.sub(jobIdWithoutPlaceId, 1, 8) .. "-" ..
		string.sub(jobIdWithoutPlaceId, 9, 12) .. "-" ..
		string.sub(jobIdWithoutPlaceId, 13, 16) .. "-" ..
		string.sub(jobIdWithoutPlaceId, 17, 20) .. "-" ..
		string.sub(jobIdWithoutPlaceId, 21)

	return formattedJobId, tonumber(placeId)
end


-- Magnet Control

function MagnetPlayer(TargetUsername)
	local Target = GetPlayerFromNameSnippet(TargetUsername)
	if not Target then return end

	local StopMagnet = Instance.new("BoolValue", Player)
	StopMagnet.Name = "StopMagnet"

	wait(0.1)

	if StopMagnet then
		StopMagnet:Destroy()
	end

	repeat
		pcall(function()
			local Character = GetCharacter(Player)
			local TargetCharacter = GetCharacter(Target)
			local Root = GetRoot(Player)
			local TargetRoot = GetRoot(Target)

			local Magnet = Root:FindFirstChild("MagnetForce")

			if not Magnet then
				Magnet = Instance.new("AlignPosition")
				Magnet.Name = "MagnetForce"
				Magnet.MaxForce = 2850
				Magnet.MaxVelocity = math.huge
				Magnet.Parent = Root
				Magnet.Responsiveness = 12
			end

			local Attachment0 = Root:FindFirstChild("MagnetA1")
			if not Attachment0 then
				Attachment0 = Instance.new("Attachment", Root)
				Attachment0.Name = "MagnetA1"
			end
			local Attachment1 = Root:FindFirstChild("MagnetA2")
			if not Attachment1 then
				Attachment1 = Instance.new("Attachment", TargetRoot)
				Attachment1.Name = "MagnetA2"
			end
			Magnet.Attachment0 = Attachment0
			Magnet.Attachment1 = Attachment1

			if Character.Humanoid.Sit == false then
				Character.Humanoid.Sit = false
				wait(0.01)
				Character.Humanoid.Sit = true
			end
		end)
		task.wait()
	until Player:FindFirstChild("StopMagnet")

	Player.StopMagnet:Destroy()
	local Root = GetRoot(Player)
	if Root:FindFirstChild("MagnetForce") then
		Root.MagnetForce:Destroy()
	end
	if Root:FindFirstChild("MagnetA1") then
		Root.MagnetA1:Destroy()
	end
end

-- Flight Control

local userinput = game:GetService("UserInputService")
local cam = workspace.CurrentCamera


function getNextMovement()
	local nextMove = Vector3.new(0,0,0)
	if userinput:IsKeyDown("W") then
		nextMove = nextMove + Vector3.new(0,0,-1)
	end
	if userinput:IsKeyDown("S") then
		nextMove = nextMove + Vector3.new(0,0,1)
	end
	if userinput:IsKeyDown("A") then
		nextMove = nextMove + Vector3.new(-1,0,0)
	end
	if userinput:IsKeyDown("D") then
		nextMove = nextMove + Vector3.new(1,0,0)
	end

	if userinput:IsKeyDown("Space") then
		nextMove = nextMove + Vector3.new(0,1,0)
	elseif userinput:IsKeyDown("LeftControl") then
		nextMove = nextMove + Vector3.new(0,-1,0)
	end
	return nextMove * FlySpeed/2.5
end

local selected = false
local flyForce, bodyGyro

local function ToggleFlight(Value, FlySpeedValue)
	local Character = GetCharacter(Player)
	local Humanoid = Character:WaitForChild("Humanoid")
	local HumanoidRootPart = GetRoot(Player)

	if tonumber(FlySpeedValue) then
		FlySpeed = tonumber(FlySpeedValue)
		if FlySpeed > 100 then
			FlySpeed = 100
		end
	else
		FlySpeed = 30
	end

	if Value then
		Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
		wait(0.1)
		Humanoid.PlatformStand = true

		flyForce = Instance.new("BodyPosition")
		flyForce.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
		flyForce.Position = HumanoidRootPart.Position + Vector3.new(0,4,0)
		flyForce.D = 1000 + (FlySpeed * 0.2)  -- Adjust damping based on FlySpeed
		flyForce.Name = "GYRO"
		flyForce.Parent = HumanoidRootPart

		bodyGyro = Instance.new("BodyGyro")
		bodyGyro.D = 50
		bodyGyro.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
		bodyGyro.P = 300
		bodyGyro.Name = "GYRO"
		bodyGyro.CFrame = HumanoidRootPart.CFrame
		bodyGyro.Parent = HumanoidRootPart

		local tiltMax = 3
		local tiltAmount = 0
		local tiltInc = 1
		local static = 0

		local lastUpdate = tick()
		local lastPosition = HumanoidRootPart.Position

		selected = true
		while selected do
			wait()
			local delta = tick() - lastUpdate
			local look = (cam.Focus.Position - cam.CFrame.Position).Unit
			local pos = HumanoidRootPart.Position
			local nextMove = getNextMovement()
			local targetCFrame = CFrame.new(pos, pos + look) * CFrame.new(nextMove)

			if nextMove.Magnitude > 0 then
				static = 0
				flyForce.Position = targetCFrame.Position
				tiltAmount = tiltAmount + tiltInc
			else
				static = static + 1
				tiltAmount = 1
				local maxMag = 6
				local mag = (HumanoidRootPart.Position - lastPosition).Magnitude
				if mag > maxMag and static >= 4 then
					flyForce.Position = HumanoidRootPart.Position
				end
			end

			if math.abs(tiltAmount) > tiltMax then
				tiltAmount = tiltMax
			end
			-- Clamp tiltAmount to max tilt
			tiltAmount = math.clamp(tiltAmount, -tiltMax, tiltMax)

			local tiltX = tiltAmount * nextMove.X * -0.5
			local tiltZ = tiltAmount * nextMove.Z
			bodyGyro.CFrame = targetCFrame * CFrame.Angles(math.rad(tiltZ), 0, math.rad(tiltX))

			lastUpdate = tick()
			lastPosition = HumanoidRootPart.Position
		end
	else
		selected = false
		if flyForce then flyForce:Destroy() end
		if bodyGyro then bodyGyro:Destroy() end
		Humanoid.PlatformStand = false
	end
end

local function SetupMarkers()
	if MarkerUI ~= nil then
		MarkerUI:Destroy()
	end
	MarkerUI = Instance.new("ScreenGui")
	MarkerUI.Name = "Markers"
	MarkerUI.ResetOnSpawn = false
	MarkerUI.Parent = Player.PlayerGui
	MarkersActive = true
	wait(0.1)
	while MarkersActive do
		for _,Target in pairs(Players:GetPlayers()) do
			if Target == Player then continue end
			if not Target.Character then
				if MarkerUI:FindFirstChild(Target.Name) then
					MarkerUI:FindFirstChild(Target.Name):Destroy()
				end
				continue
			end
			if MarkerUI:FindFirstChild(Target.Name) then
				continue
			end
			local Marker, Button = CreateMarker(Target)
			if Marker then
				Marker.Parent = MarkerUI
				Button.MouseButton1Click:Connect(function()
					TeleportToPlayer(Target)
				end)
			end
		end
		for _,Marker in pairs(MarkerUI:GetChildren()) do
			if Marker:IsA("BillboardGui") and not Players:FindFirstChild(Marker.Name) then
				Marker:Destroy()
			end
		end
		wait(0.65)
	end
end

local function CreateStaircaseUpwards(Stairs)
	local NumberedStairs = tonumber(Stairs)
	if not NumberedStairs then return end
	Stairs = NumberedStairs
	if Stairs > 200 then
		Stairs = 200
	end
	local StaircaseFolder = workspace:FindFirstChild("StaircaseInstance_" .. Player.UserId)
	if not StaircaseFolder then
		StaircaseFolder = Instance.new("Folder", workspace)
		StaircaseFolder.Name = "StaircaseInstance_" .. Player.UserId
	end

	local Character = Player.Character or Player.CharacterAdded:Wait()
	local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

	local StaircaseItem = Instance.new("Part")
	StaircaseItem.Transparency = 0.2
	StaircaseItem.CastShadow = false
	StaircaseItem.Material = Enum.Material.ForceField
	StaircaseItem.Color = Color3.fromRGB(165, 38, 255)
	StaircaseItem.CanCollide = true
	StaircaseItem.Anchored = true

	local LastStairPos = HumanoidRootPart.Position - Vector3.new(0,4,0)
	local LookVector = HumanoidRootPart.CFrame.LookVector
	local Orientation = HumanoidRootPart.Orientation
	for i = 1, Stairs + 1 do
		local NewStair = StaircaseItem:Clone()
		NewStair.Position = LastStairPos + (LookVector * 2) + Vector3.new(0, StaircaseItem.Size.Y, 0)
		NewStair.Orientation = Orientation
		NewStair.Parent = StaircaseFolder
		LastStairPos = NewStair.Position
		task.wait(0.01)
	end
end

local ExplosionInProcess = false

local function ExplodePlayer(Power)
	if not tonumber(Power) then
		Power = 75
	end
	Power = tonumber(Power)
	if Power < 10 then
		Power = 10
	end
	if ExplosionInProcess then return end
	ExplosionInProcess = true
	local Character = GetCharacter(Player)
	local Root = GetRoot(Player)
	local Humanoid = Character.Humanoid
	Humanoid:ChangeState(Enum.HumanoidStateType.FallingDown)
	local Velocity = Instance.new("BodyAngularVelocity")
	Velocity.Name = "ExplosionVelocity"
	Velocity.MaxTorque = Vector3.new(0,math.huge,0)
	Velocity.AngularVelocity = Vector3.new(0,Power,0)
	Velocity.Parent = Root
	task.wait(0.5)
	Character:BreakJoints()
	ExplosionInProcess = false
end

local function SetCameraTarget(Type, Target)
	if Player:FindFirstChild("RemoveViewPlayer") then
		return
	end
	if Type == "None" then
		local Value = Instance.new("BoolValue", Player)
		Value.Name = "RemoveViewPlayer"
		Camera.CameraType = Enum.CameraType.Custom
		Camera.CameraSubject = GetCharacter(Player).Humanoid
	elseif Type == "View" then
		repeat
			pcall(function()
				local TargetCharacter = GetCharacter(Target)
				Camera.CameraSubject = TargetCharacter.Humanoid
			end)
			task.wait(0.15)
		until Player:FindFirstChild("RemoveViewPlayer")
		Player:FindFirstChild("RemoveViewPlayer"):Destroy()
		Camera.CameraType = Enum.CameraType.Custom
		Camera.CameraSubject = GetCharacter(Player).Humanoid
	end
end

local function AttachToPlayer(TargetUsername, AttachPart)
	if #TargetUsername < 1 then
		return
	end
	TargetUsername = string.lower(TargetUsername)
	local Target = GetPlayerFromNameSnippet(TargetUsername)

	if not Target then return end

	local Part
	local AttachmentOffset

	if AttachPart == "Back" then
		Part = "HumanoidRootPart"
		AttachmentOffset = CFrame.new(0,0,1.25) * CFrame.Angles(0, -3, 0)
	elseif AttachPart == "Head" then
		Part = "Head"
		AttachmentOffset = CFrame.new(0,1.45,0)
	elseif AttachPart == "Front" then
		Part = "HumanoidRootPart"
		AttachmentOffset = CFrame.new(0,0,-1.25)
	elseif AttachPart == "Left" then
		Part = "LeftHand"
		AttachmentOffset = CFrame.Angles(-1.5, 3, 0) + Vector3.new(0,-0.45,1)
	elseif AttachPart == "Right" then
		Part = "RightHand"
		AttachmentOffset = CFrame.Angles(-1.5, 3, 0) + Vector3.new(0,-0.45,1)
	end
	local StopAttach = Player:FindFirstChild("StopAttach")
	if StopAttach then
		StopAttach:Destroy()
	end

	repeat
		pcall(function()
			local Character = GetCharacter(Player)
			local TargetCharacter = GetCharacter(Target)
			local Root = GetRoot(Player)
			Root.CFrame = TargetCharacter:FindFirstChild(Part).CFrame * AttachmentOffset
			Root.Velocity = Vector3.zero
			if Character.Humanoid.Sit == false then
				Character.Humanoid.Sit = false
				wait(0.05)
				Character.Humanoid.Sit = true
			end
		end)
		task.wait()
	until Player:FindFirstChild("StopAttach")
end

local function Pop(Height)
	local Character = GetCharacter(Player)
	local Humanoid = Character.Humanoid
	if not Humanoid then return end
	Humanoid.Sit = true
	StopPlayerAnimation()
	wait(0.15)
	StopPlayerAnimation()
	for _,Part in pairs(Character:GetDescendants()) do
		if not Part:IsA("BasePart") then continue end
		Part.CanCollide = true
	end
	wait(0.2)
	local bodyVelocity = Instance.new("BodyVelocity")
	bodyVelocity.Velocity = Vector3.new(0,Height,0)
	bodyVelocity.MaxForce = Vector3.new(0, 100000, 0)
	bodyVelocity.P = 10000
	bodyVelocity.Parent = GetRoot(Player)
	game:GetService("Debris"):AddItem(bodyVelocity, 0.15)
end


local function FlingSelf(Power)
	if not tonumber(Power) then
		return
	else
		Power = tonumber(Power)
	end
	if Power > 300 then
		Power = 300
	end
	local character = GetCharacter(Player)
	local humanoid = character:FindFirstChildOfClass("Humanoid")
	if humanoid then
		humanoid.Sit = true
		wait(0.5)
		local cameraDirection = Camera.CFrame.LookVector 
		local bodyVelocity = Instance.new("BodyVelocity")
		bodyVelocity.Velocity = cameraDirection * Power
		bodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
		bodyVelocity.P = 10000
		bodyVelocity.Parent = character.PrimaryPart

		local bodyAngularVelocity = Instance.new("BodyAngularVelocity")
		bodyAngularVelocity.AngularVelocity = Vector3.new(math.random(-10, 10), math.random(-10, 10), math.random(-10, 10))
		bodyAngularVelocity.MaxTorque = Vector3.new(100000, 100000, 100000)
		bodyAngularVelocity.P = 10000
		bodyAngularVelocity.Parent = character.PrimaryPart

		game:GetService("Debris"):AddItem(bodyVelocity, 1)
		game:GetService("Debris"):AddItem(bodyAngularVelocity, 1)
	end
end

local function SetObjectToPhase(Object)
	if Object.Name == "Baseplate" or Object.Parent.Name == "PlatformFolder_" .. Player.UserId then return end
	if Object.CanCollide == false then
		local PhaseHighlight = Object:FindFirstChild("PhaseHighlight")
		if not PhaseHighlight then return end
		Object.CanCollide = true
		PhaseHighlight:Destroy()
	else
		local PhaseHighlight = Instance.new("Highlight")
		PhaseHighlight.Name = "PhaseHighlight"
		PhaseHighlight.OutlineTransparency = 1
		PhaseHighlight.DepthMode = Enum.HighlightDepthMode.Occluded
		PhaseHighlight.FillTransparency = 0.75
		PhaseHighlight.FillColor = Color3.fromRGB(215, 147, 255)
		PhaseHighlight.Parent = Object
		Object.CanCollide = false
		table.insert(PhaseObjects, Object)
	end
end


-- Shader Method(s)

local function CreateSkybox(ID1,ID2,ID3,ID4,ID5,ID6)
	local Skybox = Instance.new("Sky")
	Skybox.SkyboxBk = ID1
	Skybox.SkyboxDn = ID2
	Skybox.SkyboxFt = ID3
	Skybox.SkyboxLf = ID4
	Skybox.SkyboxRt = ID5
	Skybox.SkyboxUp = ID6
	return Skybox
end

local function SetGameShaders(Type)
	Lighting:ClearAllChildren()
	if Type == "None" then
		for _,Shader in pairs(DefaultLighting) do
			Shader:Clone().Parent = Lighting
		end
	elseif Type == "Normal" then
		local Skybox = CreateSkybox(
			"rbxassetid://566598488",
			"rbxassetid://566598717",
			"rbxassetid://566598536",
			"rbxassetid://566598581",
			"rbxassetid://566598640",
			"rbxassetid://566598894"
		)
		Skybox.Parent = Lighting

		local Atmosphere = Instance.new("Atmosphere")
		Atmosphere.Color = Color3.fromRGB(199, 199, 199)
		Atmosphere.Parent = Lighting

		local Bloom = Instance.new("BloomEffect")
		Bloom.Enabled = true
		Bloom.Intensity = 1.2
		Bloom.Size = 22.5
		Bloom.Threshold = 1.15
		Bloom.Parent = Lighting

		local SunRays = Instance.new("SunRaysEffect")
		SunRays.Spread = 0.186
		SunRays.Intensity = 0.0475
		SunRays.Parent = Lighting

		local DOF = Instance.new("DepthOfFieldEffect")
		DOF.Enabled = true
		DOF.FarIntensity = 0.205
		DOF.FocusDistance = 0.05
		DOF.InFocusRadius = 20
		DOF.NearIntensity = 0.56
		DOF.Parent = Lighting
	elseif Type == "Grain" then
		local Skybox = CreateSkybox(
			"http://www.roblox.com/asset/?id=4495864450",
			"http://www.roblox.com/asset/?id=4495864887",
			"http://www.roblox.com/asset/?id=4495865458",
			"http://www.roblox.com/asset/?id=4495866035",
			"http://www.roblox.com/asset/?id=4495866584",
			"http://www.roblox.com/asset/?id=4495867486"
		)
		Skybox.Parent = Lighting


		local Correction = Instance.new("ColorCorrectionEffect")
		Correction.Brightness = -0.3
		Correction.Contrast = 1
		Correction.Enabled = true
		Correction.Saturation = -1
		Correction.Parent = Lighting
		Correction.TintColor = Color3.fromRGB(240,240,240)

		local Atmosphere = Instance.new("Atmosphere")
		Atmosphere.Color = Color3.fromRGB(199, 199, 199)
		Atmosphere.Parent = Lighting
	elseif Type == "Pink" then
		local Skybox = CreateSkybox(
			"http://www.roblox.com/asset/?id=271042516",
			"http://www.roblox.com/asset/?id=271077243",
			"http://www.roblox.com/asset/?id=271042556",
			"http://www.roblox.com/asset/?id=271042310",
			"http://www.roblox.com/asset/?id=271042467",
			"http://www.roblox.com/asset/?id=271077958"
		)
		Skybox.Parent = Lighting

		local Atmosphere = Instance.new("Atmosphere")
		Atmosphere.Parent = Lighting

		local Bloom = Instance.new("BloomEffect")
		Bloom.Enabled = true
		Bloom.Intensity = 1.2
		Bloom.Size = 22.5
		Bloom.Threshold = 1.1
		Bloom.Parent = Lighting

		local Correction = Instance.new("ColorCorrectionEffect")
		Correction.Contrast = -0.1
		Correction.TintColor = Color3.fromRGB(245, 225, 255)
		Correction.Enabled = true
		Correction.Saturation = 0.2
		Correction.Parent = Lighting
	elseif Type == "Space" then
		local Skybox = CreateSkybox(
			"http://www.roblox.com/asset/?id=16262356578",
			"http://www.roblox.com/asset/?id=16262358026",
			"http://www.roblox.com/asset/?id=16262360469",
			"http://www.roblox.com/asset/?id=16262362003",
			"http://www.roblox.com/asset/?id=16262363873",
			"http://www.roblox.com/asset/?id=16262366016"
		)
		Skybox.Parent = Lighting

		local Atmosphere = Instance.new("Atmosphere")
		Atmosphere.Density = 0.7
		Atmosphere.Offset = 1.93
		Atmosphere.Parent = Lighting

		local Bloom = Instance.new("BloomEffect")
		Bloom.Enabled = true
		Bloom.Intensity = 1.05
		Bloom.Size = 20
		Bloom.Threshold = 1.25
		Bloom.Parent = Lighting

		local Correction = Instance.new("ColorCorrectionEffect")
		Correction.Contrast = 0.1
		Correction.TintColor = Color3.fromRGB(229, 161, 229)
		Correction.Enabled = true
		Correction.Brightness = -0.1
		Correction.Saturation = -0.2
		Correction.Parent = Lighting

	elseif Type == "Baked" then
		local Correction = Instance.new("ColorCorrectionEffect")
		Correction.Brightness = 0
		Correction.Contrast = 390
		Correction.Enabled = true
		Correction.Saturation = -4
		Correction.Parent = Lighting
	elseif Type == "B&W" then
		local Correction = Instance.new("ColorCorrectionEffect")
		Correction.Brightness = 0
		Correction.Contrast = 390
		Correction.Enabled = true
		Correction.Saturation = -1
		Correction.Parent = Lighting
	end
end


-- Setup Method

local currentDraggableObject = OuterFrame

local function Setup()
	if Player:GetAttribute("EmptyToolsInstance") == true then
		CreateAlert(
			"Instance Already Found", 
			"An instance of Empty Tools is already running. Please close all instances before executing again." ,
			nil, 
			"Ok", 
			nil,
			Enum.TextXAlignment.Center,
			function()
				script:Destroy()
			end
		)
		return
	end
	Player:SetAttribute("EmptyToolsInstance", true)

	MainUI = CreateUI()
	MainUI.Parent = Player.PlayerGui
	OuterFrame = MainUI:WaitForChild("OuterFrame")
	Contents = OuterFrame:WaitForChild("Contents")
	ContentShrunken = OuterFrame:WaitForChild("ContentShrunken")
	InfoFrame = Contents:WaitForChild("Info")

	currentDraggableObject = OuterFrame

	MarkerUI = Instance.new("ScreenGui")
	MarkerUI.ResetOnSpawn = false
	MarkerUI.Name = "MarkerContainer"
	MarkerUI.Parent = Player.PlayerGui

	--Defaults
	DefaultDestroyHeight = workspace.FallenPartsDestroyHeight
	DefaultMinZoomDistance = Player.CameraMinZoomDistance
	DefaultMaxZoomDistance = Player.CameraMaxZoomDistance


	for _,Shader in pairs(Lighting:GetChildren()) do
		table.insert(DefaultLighting, Shader:Clone())
	end

	if not Player:GetAttribute("NoChangeLogs") then
		LogsOpen = true
		Log = ShowChangeLogs(true, function()
			LogsOpen = false
			Log = nil
		end)
	end


	-- Drag Handler

	coroutine.resume(coroutine.create(function()
		local userInputService: UserInputService = game:GetService("UserInputService") -- UserInputService
		local tweenService: TweenService = game:GetService("TweenService") -- Tweenservice
		local dragToggle: boolean = nil -- Toggle?
		local dragObject: GuiObject = OuterFrame -- Object Being Dragged
		local dragInput: InputObject = nil -- Input On The Drag Object
		local dragStart: Vector2 = nil -- Starting Position
		local dragInfo: TweenInfo = TweenInfo.new(0.075, Enum.EasingStyle.Quad) -- Drag Speed
		local dragPos: UDim2 = nil -- Drag Pos

		local function updateInput(input) -- Updates Input
			local delta: Vector2 = input.Position - dragStart
			local position: UDim2 = UDim2.new(dragPos.X.Scale, dragPos.X.Offset + delta.X, dragPos.Y.Scale, dragPos.Y.Offset + delta.Y)
			tweenService:Create(dragObject, dragInfo, {Position = position}):Play()
		end

		local function dragInputBegan(input: InputObject)
			if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and userInputService:GetFocusedTextBox() == nil then
				if UIOpen then
					dragToggle = true
					dragStart = input.Position
					dragPos = dragObject.Position
					input.Changed:Connect(function()
						if input.UserInputState == Enum.UserInputState.End then
							dragToggle = false
						end
					end)
				elseif not UIOpen and ContentShrunken then
					-- Check if input started within ContentShrunken boundaries
					local mousePosition = input.Position
					local contentPosition = ContentShrunken.AbsolutePosition
					local contentSize = ContentShrunken.AbsoluteSize

					if mousePosition.X >= contentPosition.X and mousePosition.X <= contentPosition.X + contentSize.X and
						mousePosition.Y >= contentPosition.Y and mousePosition.Y <= contentPosition.Y + contentSize.Y then
						dragToggle = true
						dragStart = input.Position
						dragPos = dragObject.Position
						input.Changed:Connect(function()
							if input.UserInputState == Enum.UserInputState.End then
								dragToggle = false
							end
						end)
					end
				end
			end
		end

		local function dragInputChanged(input: InputObject)
			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				dragInput = input
			end
		end

		local function userInputChanged(input: InputObject, gameProcessedEvent: boolean)
			if input == dragInput and dragToggle then
				updateInput(input) -- Calls The Update Input Function With The Provided Input Object
			end
		end

		OuterFrame.InputBegan:Connect(dragInputBegan)
		OuterFrame.InputChanged:Connect(dragInputChanged)
		userInputService.InputChanged:Connect(userInputChanged)
	end))


end

local function SetupCommands()
	if not MainUI then return end
	CreateCommand("Platform", "Create a platform beneath your character to walk around on.", nil, nil, "World",
		function()
			local PltInstance = workspace:FindFirstChild("PlatformFolder_" .. Player.UserId)
			if PltInstance then
				PltInstance:Destroy()
			end
			local Platform = Instance.new("Part")
			Platform.Size = Vector3.new(3050,3,3050)
			Platform.Anchored = true
			Platform.CanCollide = true
			Platform.Transparency = 0
			Platform.Material = Enum.Material.ForceField
			Platform.Color = Color3.fromRGB(152, 67, 255)
			Platform.CastShadow = false

			local Root = GetRoot(Player)
			Platform.Position = Root.Position - Vector3.new(0,4.6,0)
			PltInstance = Instance.new("Folder", workspace)
			PltInstance.Name = "PlatformFolder_" .. Player.UserId
			Platform.Parent = PltInstance
		end,
		function()
			local PltInstance = workspace:FindFirstChild("PlatformFolder_" .. Player.UserId)
			if PltInstance then
				PltInstance:Destroy()
			end
		end
	)
	CreateCommand("Emote", "Play any emote from the marketplace by pasting the ID found in the URL.", "Emote ID..", nil, "Character", 
		function(ID)
			PlayEmote(ID)
		end,
		nil
	)
	CreateCommand("Fly", "Flight using WASD for movement and Ctrl/Space for height with a max speed of 100. Not enabled for mobile.", "Speed..", nil, "Character",
		function(Speed)
			if selected then
				ToggleFlight(false, Speed)
				wait(0.035)
			end
			ToggleFlight(true, Speed)
		end,
		function()
			ToggleFlight(false, FlySpeed)
		end
	)
	CreateCommand("Point Teleport", "When enabled, teleports your character to any point clicked on screen.", nil, nil, "Character",
		function()
			TeleportEnabled = true
			PhaseEnabled = false
			for _,PhaseObj in pairs(PhaseObjects) do
				if PhaseObj:FindFirstChild("PhaseHighlight") then
					PhaseObj.PhaseHighlight:Destroy()
					PhaseObj.CanCollide = true
				end
			end
			TeleportIndicator = CreateTeleportIndicator()
			Mouse.TargetFilter = TeleportIndicator
		end,
		function()
			TeleportEnabled = false
		end
	)
	CreateCommand("Reset", "Kills your character in order to reset it. Useful for games with reset disabled.", nil, nil, "Character",
		function()
			GetCharacter(Player):FindFirstChildOfClass("Humanoid").Health = 0
		end,
		nil
	)
	CreateCommand("Staircase", "Creates a staircase with a max of 200 steps in front of your character.", "Steps..", nil, "World",
		function(Steps)
			CreateStaircaseUpwards(Steps)
		end,
		function()
			local StaircaseFolder = workspace:FindFirstChild("StaircaseInstance_" .. Player.UserId)
			if StaircaseFolder then
				StaircaseFolder:ClearAllChildren()
			end
		end
	)
	CreateCommand("Rejoin", "Return to the same server, or hop to a new one.", nil, {"Rejoin", "Hop"}, "Game",
		function(Type)
			if Type == "Rejoin" then
				TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, Player)
			elseif Type == "Hop" then
				local ServerList = {}
				local Request = game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Desc&limit=10")
				local RequestBody = HttpService:JSONDecode(Request)
				if RequestBody and RequestBody.data then
					for _,Server in next, RequestBody.data do
						if type(Server) == "table" 
							and tonumber(Server.playing) 
							and tonumber(Server.maxPlayers) 
							and Server.playing < Server.maxPlayers 
							and Server.id ~= game.JobId then
							table.insert(ServerList, 1, Server.id)
						end
					end
				end
				if #ServerList > 0 then
					TeleportService:TeleportToPlaceInstance(game.PlaceId, ServerList[math.random(1,#ServerList)], Player)
				end
			end
		end,
		nil
	)
	CreateCommand("Freecam", "Detaches the camera from the player to move around freely and locks player movement controls.", nil, nil, "Camera",
		function()
			StartFreecam()
		end,
		function()
			StopFreecam()
		end
	)
	CreateCommand("Explode", "Spins the character at a high velocity and then breaks the joints.", "Power..", nil, "Character",
		function(Power)
			ExplodePlayer(Power)
		end,
		nil
	)
	CreateCommand("Phase", "When enabled, allows you to click on any object and disable collisions allowing you to walk through it.", nil, nil, "World",
		function()
			PhaseEnabled = true
			TeleportEnabled = false
		end,
		function()
			PhaseEnabled = false
			for _,Object in pairs(PhaseObjects) do
				if Object:FindFirstChild("PhaseHighlight") then
					Object.PhaseHighlight:Destroy()
					Object.CanCollide = true
				end
			end
		end
	)
	CreateCommand("Respawn", "Attempts to find a loaded spawn locaton and teleport you to it.", nil, {"Fastest", "Closest", "Random"}, "Character",
		function(Type)
			local SpawnLocation
			if Type == "Fastest" then
				SpawnLocation = workspace:FindFirstChildOfClass("SpawnLocation")
			end
			if Type == "Closest" then
				local Distance = math.huge
				for _,Object in pairs(workspace:GetDescendants()) do
					if Object:IsA("SpawnLocation") then
						local Sep = (Object.Position - GetRoot(Player).Position).Magnitude
						if Sep < Distance then
							Distance = Sep
							SpawnLocation = Object
						end
					end
				end
			end
			if Type == "Random" or SpawnLocation == nil then
				local Locations = {}
				for _,Object in pairs(workspace:GetDescendants()) do
					if Object:IsA("SpawnLocation") then
						table.insert(Locations, Object)
					end
				end
				SpawnLocation = Locations[math.random(1,#Locations)]
			end
			if SpawnLocation then
				local Root = GetRoot(Player)
				Root.Velocity = Vector3.zero
				Root.CFrame = SpawnLocation.CFrame + Vector3.new(0,4.5,0)
			end
		end,
		nil
	)
	CreateCommand("View", "View the perspective of another player by typing their username or display name.", "Name..", nil,"Camera",
		function(Username)
			local TargetPlayer = GetPlayerFromNameSnippet(Username)
			if TargetPlayer then
				SetCameraTarget("View", TargetPlayer)
			end
		end,
		function()
			SetCameraTarget("None", nil)
		end
	)
	CreateCommand("Stats", "Allows the customization of player stats such as speed and jump height. Does not save on respawn.", "Value..", {"Speed","Jump"}, "Character",
		function(Value, Type)
			local Character = GetCharacter(Player)
			local Humanoid = Character:FindFirstChild("Humanoid")
			if Type == "Speed" then
				Humanoid.WalkSpeed = Value
			elseif Type == "Jump" then
				Humanoid.UseJumpPower = true
				Humanoid.JumpPower = Value
			end
		end,
		nil
	)
	CreateCommand("Fling", "Flings your character in the direction of your camera with adjustable power, capped at 300.", "Power..", nil,"Character",
		function(Power)
			FlingSelf(Power)
		end,
		nil
	)
	CreateCommand("Markers", "Shows the location of all players currently loaded on the client. Click their name to teleport to them.", nil, nil, "World",
		function()
			SetupMarkers()
		end,
		function()
			MarkersActive = false
			MarkerUI:ClearAllChildren()
		end
	)
	CreateCommand("Attach", "Attaches your character to the back of any player. Use username or display name.", "Name..", {"Back","Head","Front","Left","Right"}, "Character",
		function(Username, PartEnum)
			print(PartEnum)
			AttachToPlayer(Username, PartEnum)
		end,
		function()
			if Player:FindFirstChild("StopAttach") then
				return
			end
			local StopAttach = Instance.new("StringValue")
			StopAttach.Name = "StopAttach"
			StopAttach.Parent = Player
		end
	)
	CreateCommand("Time", "Sets the in-game clock time, changing the skybox. May not work in games with daylight cycles.", "Time..", nil, "Game",
		function(Time)
			if tonumber(Time) then
				Lighting.ClockTime = tonumber(Time)
			end
		end,
		nil
	)
	CreateCommand("Shading", "Changes the lighting effects, skybox, and post processing to some preset options.", nil, {"None", "Normal", "Grain", "Pink", "Space", "Baked", "B&W"}, "Game",
		function(Type)
			SetGameShaders(Type)
		end,
		function()
			SetGameShaders("None")
		end
	)
	CreateCommand("Pop", "Flings your character upwards with adjustable power.", "Power..", nil,"Character",
		function(Power)
			Pop(Power)
		end,
		nil
	)
	CreateCommand("Safe Void", "Makes the void safe by either disabling the respawn height or returning to spawn.", nil, {"None", "Disable", "Return"}, "Game",
		function(EnumType)
			ReturnOnFall = false
			if EnumType == "None" then
				workspace.FallenPartsDestroyHeight = DefaultDestroyHeight
			elseif EnumType == "Disable" then
				workspace.FallenPartsDestroyHeight = -math.huge
			elseif EnumType == "Return" then
				ReturnOnFall = true
				workspace.FallenPartsDestroyHeight = DefaultDestroyHeight
			end
		end,
		function()
			ReturnOnFall = false
			workspace.FallenPartsDestroyHeight = DefaultDestroyHeight
		end
	)
	CreateCommand("Free Zoom", "Unlocks the camera maximum and minmum zoom distance", nil, nil, "Camera",
		function()
			Player.CameraMinZoomDistance = 0
			Player.CameraMaxZoomDistance = math.huge
		end,
		function()
			Player.CameraMinZoomDistance = DefaultMinZoomDistance
			Player.CameraMaxZoomDistance = DefaultMaxZoomDistance
		end
	)
	CreateCommand("Magnet", "Brings your character to another with an invisible force", "Name..", nil, "Character",
		function(Username)
			MagnetPlayer(Username)
		end,
		function()
			if Player:FindFirstChild("StopMagnet") then
				return
			end
			local StopAttach = Instance.new("StringValue")
			StopAttach.Name = "StopMagnet"
			StopAttach.Parent = Player
		end
	)
	CreateCommand("Link", "Allows users with Empty Tools to join your current game. ID is only required for joins.", "ID..", {"Invite", "Join"}, "Game",
		function(ID, Type)
			if Type == "Invite" then
				local IDKey = CreateLinkKey(game.JobId)
				local Alert = CreateLinkAlert(IDKey)
			elseif Type == "Join" then
				if not ID then return end
				local ID_Decode, PlaceID = RecieveLinkKey(ID)
				if ID_Decode then
					TeleportService:TeleportToPlaceInstance(PlaceID, ID_Decode, Player)
				end
			end
		end,
		nil
	)
end

Setup()

SetupCommands()

-- Mouse Handling

Mouse.Button1Down:Connect(function()
	if not Mouse.Target then return end
	if TeleportEnabled then
		local Location = Mouse.Hit.Position
		if not Location then return end
		GetRoot(Player).Velocity = Vector3.zero
		GetCharacter(Player):MoveTo(Location)
	elseif PhaseEnabled then
		local Target = Mouse.Target
		if not Target:IsA("BasePart") then return end
		SetObjectToPhase(Target)
	end
end)

-- UI Control

if not MainUI then return end

local ToggleTween

OuterFrame.Toggle.MouseButton1Click:Connect(function()
	UIOpen = not UIOpen
	ContentShrunken.Visible = not UIOpen
	OuterFrame.Toggle.Text = UIOpen and "-" or "+"
	local Transparency = UIOpen and 0 or 1
	if ToggleTween then
		ToggleTween:Cancel()
	end
	Contents.Visible = UIOpen
	ToggleTween = TweenService:Create(OuterFrame, FadeTweenInfo, {BackgroundTransparency = Transparency})
	ToggleTween:Play()
end)

OuterFrame.Info.MouseButton1Click:Connect(function()
	if LogsOpen then 
		if Log then
			Log:Destroy()
			LogsOpen = false
		end
		return 
	end
	LogsOpen = true
	Log = ShowChangeLogs(false)
	repeat wait() until Log.Parent ~= Player.PlayerGui
	LogsOpen = false
	Log = nil
end)

OuterFrame.Close.MouseButton1Click:Connect(function()
	Player:SetAttribute("EmptyToolsInstance", false)
	if LogsOpen then 
		if Log then
			Log:Destroy()
			LogsOpen = false
		end 
	end
	local PltInstance = workspace:FindFirstChild("PlatformFolder_" .. Player.UserId)
	if PltInstance then
		PltInstance:Destroy()
	end
	for _,PhaseObj in pairs(PhaseObjects) do
		if PhaseObj:FindFirstChild("PhaseHighlight") then
			PhaseObj.PhaseHighlight:Destroy()
			PhaseObj.CanCollide = true
		end
	end
	workspace.FallenPartsDestroyHeight = DefaultDestroyHeight
	SetGameShaders("None")
	if Player.PlayerGui:FindFirstChild("LinkScreen") then
		Player.PlayerGui.LinkScreen:Destroy()
	end
	TeleportEnabled = false
	if TeleportIndicator then
		TeleportIndicator:Destroy()
	end
	TeleportIndicator = nil
	PhaseEnabled = false
	MarkersActive = false
	MarkerUI:Destroy()
	MainUI:Destroy()
	script:Destroy()
end)

Contents.Category.MouseButton1Click:Connect(function()
	local Categories = CommandCategories
	local CategoryIndex = table.find(Categories, CurrentCategory)
	CategoryIndex = CategoryIndex + 1
	if CategoryIndex > #Categories then
		CategoryIndex = 1
	end
	CurrentCategory = Categories[CategoryIndex]

	Contents.Category.Text = "Filter: " .. CurrentCategory

	local SearchText = string.lower(Contents.Search.Text)
	for _, Command in pairs(CommandFrames) do
		local Category = Command:GetAttribute("Category")
		local CommandMatchesCategory = (CurrentCategory == "None" or Category == CurrentCategory)
		local CommandMatchesSearch = (SearchText == "" or #SearchText < 1 or string.find(string.lower(Command.Name), SearchText))

		Command.Visible = CommandMatchesCategory and CommandMatchesSearch
	end
	Contents.Commands.CanvasPosition = Vector2.zero
end)

Contents.Search:GetPropertyChangedSignal("Text"):Connect(function()
	local SearchText = string.lower(Contents.Search.Text)

	for _, Command in pairs(CommandFrames) do
		local Category = Command:GetAttribute("Category")
		local CommandMatchesCategory = (CurrentCategory == "None" or Category == CurrentCategory)
		local CommandMatchesSearch = (SearchText == "" or #SearchText < 1 or string.find(string.lower(Command.Name), SearchText))

		Command.Visible = CommandMatchesCategory and CommandMatchesSearch
	end

	Contents.Commands.CanvasPosition = Vector2.zero
end)

Contents.Tips.MouseButton1Click:Connect(function()
	TipsEnabled = not TipsEnabled
	Contents.Tips.Text = TipsEnabled and "Tips: On" or "Tips: Off"
end)

-- Loop



RunService.RenderStepped:Connect(function()
	if TeleportEnabled then
		if TeleportIndicator then
			TeleportIndicator:MoveTo(Mouse.Hit.Position)
			local Part = TeleportIndicator:GetChildren()[1]
			Part.Position = TeleportIndicator.WorldPivot.Position
			local Root = GetRoot(Player)
			if Root then
				if (Root.Position - Part.Position).Magnitude < 7 then
					Part.CanCollide = false
				else
					Part.CanCollide = true
				end
			end

		end
	elseif TeleportIndicator ~= nil then
		TeleportIndicator:Destroy()
		TeleportIndicator = nil
	end

	if ReturnOnFall == true then
		local Root = GetRoot(Player)
		if Root then
			if Root.Position.Y < (DefaultDestroyHeight + 18) then
				local SpawnLocation = workspace:FindFirstChildOfClass("SpawnLocation")
				if SpawnLocation then
					Root.Velocity = Vector3.zero
					Root.CFrame = SpawnLocation.CFrame + Vector3.new(0,4.5,0)
				end
			end
		end
	end
end)